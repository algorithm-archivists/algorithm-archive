
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Convolutions of Images (2D) · Arcane Algorithm Archive</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 3.6.23">
        
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-bibtex-cite/style.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-api-language-selector/api-language-selector.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../convolutional_theorem/convolutional_theorem.html" />
    
    
    <link rel="prev" href="../multiplication/multiplication.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    Algorithm Archive
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../introduction/introduction.html">
            
                <a href="../../introduction/introduction.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../how_to_contribute/how_to_contribute.html">
            
                <a href="../../how_to_contribute/how_to_contribute.html">
            
                    
                    How To Contribute
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../plotting/plotting.html">
            
                <a href="../../plotting/plotting.html">
            
                    
                    Plotting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../domain_coloring/domain_coloring.html">
            
                <a href="../../domain_coloring/domain_coloring.html">
            
                    
                    Domain Coloring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../IFS/IFS.html">
            
                <a href="../../IFS/IFS.html">
            
                    
                    Iterated Function Systems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../../barnsley/barnsley.html">
            
                <a href="../../barnsley/barnsley.html">
            
                    
                    The Barnsley Fern
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../data_structures/data_structures.html">
            
                <a href="../../data_structures/data_structures.html">
            
                    
                    Data Structures
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../stacks_and_queues/stacks_and_queues.html">
            
                <a href="../../stacks_and_queues/stacks_and_queues.html">
            
                    
                    Stacks and Queues
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../mathematical_background/mathematical_background.html">
            
                <a href="../../mathematical_background/mathematical_background.html">
            
                    
                    Mathematical Background
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../notation/notation.html">
            
                <a href="../../notation/notation.html">
            
                    
                    Complexity Notation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../../affine_transformations/affine_transformations.html">
            
                <a href="../../affine_transformations/affine_transformations.html">
            
                    
                    Affine Transformations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../../bitlogic/bitlogic.html">
            
                <a href="../../bitlogic/bitlogic.html">
            
                    
                    Bit Logic
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../../taylor_series_expansion/taylor_series_expansion.html">
            
                <a href="../../taylor_series_expansion/taylor_series_expansion.html">
            
                    
                    Taylor Series
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../convolutions.html">
            
                <a href="../convolutions.html">
            
                    
                    Convolutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.5.1" data-path="../1d/1d.html">
            
                <a href="../1d/1d.html">
            
                    
                    Convolutions in 1D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.2" data-path="../multiplication/multiplication.html">
            
                <a href="../multiplication/multiplication.html">
            
                    
                    Multiplication as a Convolution
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.5.3" data-path="2d.html">
            
                <a href="2d.html">
            
                    
                    Convolutions of Images (2D)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.4" data-path="../convolutional_theorem/convolutional_theorem.html">
            
                <a href="../convolutional_theorem/convolutional_theorem.html">
            
                    
                    Convolutional Theorem
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../tree_traversal/tree_traversal.html">
            
                <a href="../../tree_traversal/tree_traversal.html">
            
                    
                    Tree Traversal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../euclidean_algorithm/euclidean_algorithm.html">
            
                <a href="../../euclidean_algorithm/euclidean_algorithm.html">
            
                    
                    Euclidean Algorithm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../monte_carlo_integration/monte_carlo_integration.html">
            
                <a href="../../monte_carlo_integration/monte_carlo_integration.html">
            
                    
                    Monte Carlo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../../matrix_methods/matrix_methods.html">
            
                <a href="../../matrix_methods/matrix_methods.html">
            
                    
                    Matrix Methods
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../../gaussian_elimination/gaussian_elimination.html">
            
                <a href="../../gaussian_elimination/gaussian_elimination.html">
            
                    
                    Gaussian Elimination
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../../thomas_algorithm/thomas_algorithm.html">
            
                <a href="../../thomas_algorithm/thomas_algorithm.html">
            
                    
                    Thomas Algorithm
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../../computational_geometry/computational_geometry.html">
            
                <a href="../../computational_geometry/computational_geometry.html">
            
                    
                    Computational Geometry
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../../gift_wrapping/gift_wrapping.html">
            
                <a href="../../gift_wrapping/gift_wrapping.html">
            
                    
                    Gift Wrapping
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1.1" data-path="../../jarvis_march/jarvis_march.html">
            
                <a href="../../jarvis_march/jarvis_march.html">
            
                    
                    Jarvis March
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.2" data-path="../../graham_scan/graham_scan.html">
            
                <a href="../../graham_scan/graham_scan.html">
            
                    
                    Graham Scan
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../../cooley_tukey/cooley_tukey.html">
            
                <a href="../../cooley_tukey/cooley_tukey.html">
            
                    
                    FFT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../../decision_problems/decision_problems.html">
            
                <a href="../../decision_problems/decision_problems.html">
            
                    
                    Decision Problems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../../stable_marriage_problem/stable_marriage_problem.html">
            
                <a href="../../stable_marriage_problem/stable_marriage_problem.html">
            
                    
                    Stable Marriage Problem
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../../physics_solvers/physics_solvers.html">
            
                <a href="../../physics_solvers/physics_solvers.html">
            
                    
                    Physics Solvers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../../verlet_integration/verlet_integration.html">
            
                <a href="../../verlet_integration/verlet_integration.html">
            
                    
                    Verlet Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="../../quantum_systems/quantum_systems.html">
            
                <a href="../../quantum_systems/quantum_systems.html">
            
                    
                    Quantum Systems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.2.1" data-path="../../split-operator_method/split-operator_method.html">
            
                <a href="../../split-operator_method/split-operator_method.html">
            
                    
                    Split-Operator Method
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../../data_compression/data_compression.html">
            
                <a href="../../data_compression/data_compression.html">
            
                    
                    Data Compression
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../../huffman_encoding/huffman_encoding.html">
            
                <a href="../../huffman_encoding/huffman_encoding.html">
            
                    
                    Huffman Encoding
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../../computer_graphics/computer_graphics.html">
            
                <a href="../../computer_graphics/computer_graphics.html">
            
                    
                    Computer Graphics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../../flood_fill/flood_fill.html">
            
                <a href="../../flood_fill/flood_fill.html">
            
                    
                    Flood Fill
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../../quantum_information/quantum_information.html">
            
                <a href="../../quantum_information/quantum_information.html">
            
                    
                    Quantum Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="../../computus/computus.html">
            
                <a href="../../computus/computus.html">
            
                    
                    Computus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="../../approximate_counting/approximate_counting.html">
            
                <a href="../../approximate_counting/approximate_counting.html">
            
                    
                    Approximate Counting Algorithm
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >Convolutions of Images (2D)</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="convolutions-on-images">Convolutions on Images</h1>
<p>For this section, we will no longer be focusing on signals, but instead images (arrays filled with elements of red, green, and blue values).
That said, for the code examples, greyscale images may be used such that each array element is composed of some floating-point value instead of color.
In addition, we will not be discussing boundary conditions too much in this chapter and will instead be using the simple boundaries introduced in the section on <a href="../1d/1d.html">one-dimensional convolutions</a>.</p>
<p>The extension of one-dimensional convolutions to two dimensions requires a little thought about indexing and the like, but is ultimately the same operation.
Here is an animation of a convolution for a two-dimensional image:</p>
<div style="text-align:center">
<video style="width:90%" controls loop>
  <source src="../res/2d.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
</div>

<p>In this case, we convolved the image with a 3x3 square filter, all filled with values of <script type="math/tex; ">\frac{1}{9}</script>.
This created a simple blurring effect, which is somewhat expected from the discussion in the previous section.
In code, a two-dimensional convolution might look like this:</p>
<div class="code-method"><div class="code-method-definition"></div><div class="code-method-code"><div class="code-method-sample" data-lang="jl" data-name="Julia"><pre class="language-"><code class="lang-julia"><span class="token keyword">function</span> convolve_linear<span class="token punctuation">(</span>signal<span class="token punctuation">::</span>Array<span class="token punctuation">{</span>T<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> filter<span class="token punctuation">::</span>Array<span class="token punctuation">{</span>T<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                         output_size<span class="token punctuation">)</span> where <span class="token punctuation">{</span>T <span class="token operator">&lt;:</span> Number<span class="token punctuation">}</span>

    <span class="token comment"># convolutional output</span>
    out <span class="token operator">=</span> Array<span class="token punctuation">{</span>Float64<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">(</span>undef<span class="token punctuation">,</span> output_size<span class="token punctuation">)</span>
    sum <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>output_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>output_size<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
            <span class="token keyword">for</span> k <span class="token operator">=</span> max<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> i<span class="token operator">-</span>size<span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>i
                <span class="token keyword">for</span> l <span class="token operator">=</span> max<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token operator">-</span>size<span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>j
                    <span class="token keyword">if</span> k <span class="token operator">&lt;=</span> size<span class="token punctuation">(</span>signal<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> i<span class="token operator">-</span>k<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&lt;=</span> size<span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
                       l <span class="token operator">&lt;=</span> size<span class="token punctuation">(</span>signal<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> j<span class="token operator">-</span>l<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&lt;=</span> size<span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
                        sum <span class="token operator">+=</span> signal<span class="token punctuation">[</span>k<span class="token punctuation">,</span>l<span class="token punctuation">]</span> <span class="token operator">*</span> filter<span class="token punctuation">[</span>i<span class="token operator">-</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token operator">-</span>l<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>
                    <span class="token keyword">end</span>
                <span class="token keyword">end</span>
            <span class="token keyword">end</span>

            out<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> sum
            sum <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>

    <span class="token keyword">return</span> out
<span class="token keyword">end</span>
</code></pre>
</div><div class="code-method-sample" data-lang="py" data-name="Python"><pre class="language-"><code class="lang-python"><span class="token keyword">def</span> <span class="token function">convolve_linear</span><span class="token punctuation">(</span>signal<span class="token punctuation">,</span> <span class="token builtin">filter</span><span class="token punctuation">,</span> output_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
    out <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>output_size<span class="token punctuation">)</span>
    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>output_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>output_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token operator">-</span><span class="token builtin">filter</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">for</span> l <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> j<span class="token operator">-</span><span class="token builtin">filter</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">with</span> suppress<span class="token punctuation">(</span>IndexError<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        <span class="token builtin">sum</span> <span class="token operator">+=</span> signal<span class="token punctuation">[</span>k<span class="token punctuation">,</span> l<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">filter</span><span class="token punctuation">[</span>i<span class="token operator">-</span>k<span class="token punctuation">,</span> j<span class="token operator">-</span>l<span class="token punctuation">]</span>
            out<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">sum</span>
            <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">return</span> out
</code></pre>
</div></div></div>

<p>This is very similar to what we have shown in previous sections; however, it essentially requires four iterable dimensions because we need to iterate through each axis of the output domain <em>and</em> the filter.</p>
<p>At this stage, it is worth highlighting common filters used for convolutions of images.
In particular, we will further discuss the Gaussian filter introduced in the <a href="../1d/1d.html">previous section</a>, and then introduce another set of kernels known as Sobel operators, which are used for naïve edge detection or image derivatives.</p>
<h2 id="the-gaussian-kernel">The Gaussian kernel</h2>
<p>The Gaussian kernel serves as an effective <em>blurring</em> operation for images.
As a reminder, the formula for any Gaussian distribution is</p>
<p><script type="math/tex; mode=display">
g(x,y) = \frac{1}{2\pi\sigma^2}e^{-\frac{x^2+y^2}{2\sigma^2}},
</script></p>
<p>where <script type="math/tex; ">\sigma</script> is the standard deviation and is a measure of the width of the Gaussian.
A larger <script type="math/tex; ">\sigma</script> means a larger Gaussian; however, remember that the Gaussian must fit onto the filter, otherwise it will be cut off!
For example, if you are using a <script type="math/tex; ">3\times 3</script> filter, you should not be using <script type="math/tex; ">\sigma = 10</script>.
Some definitions of <script type="math/tex; ">\sigma</script> allow users to have a separate deviation in <script type="math/tex; ">x</script> and <script type="math/tex; ">y</script> to create an ellipsoid Gaussian, but for the purposes of this chapter, we will assume <script type="math/tex; ">\sigma_x = \sigma_y</script>.
As a general rule of thumb, the larger the filter and standard deviation, the more &quot;smeared&quot; the final convolution will be.</p>
<p>At this stage, it is important to write some code, so we will generate a simple function that returns a Gaussian kernel with a specified standard deviation and filter size.</p>
<div class="code-method"><div class="code-method-definition"></div><div class="code-method-code"><div class="code-method-sample" data-lang="jl" data-name="Julia"><pre class="language-"><code class="lang-julia"><span class="token keyword">function</span> create_gaussian_kernel<span class="token punctuation">(</span>kernel_size<span class="token punctuation">)</span>

    kernel <span class="token operator">=</span> zeros<span class="token punctuation">(</span>kernel_size<span class="token punctuation">,</span> kernel_size<span class="token punctuation">)</span>

    <span class="token comment"># The center must be offset by 0.5 to find the correct index</span>
    center <span class="token operator">=</span> kernel_size <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span>

    sigma <span class="token operator">=</span> sqrt<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token operator">*</span>kernel_size<span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>kernel_size
        <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>kernel_size
            kernel<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> exp<span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">-</span>center<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>j<span class="token operator">-</span>center<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>sigma<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>

    <span class="token keyword">return</span> normalize<span class="token punctuation">(</span>kernel<span class="token punctuation">)</span>

<span class="token keyword">end</span>
</code></pre>
</div><div class="code-method-sample" data-lang="py" data-name="Python"><pre class="language-"><code class="lang-python"><span class="token keyword">def</span> <span class="token function">create_gaussian_kernel</span><span class="token punctuation">(</span>kernel_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
    kernel <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>kernel_size<span class="token punctuation">,</span> kernel_size<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># The center must be offset by 0.5 to find the correct index</span>
    center <span class="token operator">=</span> kernel_size<span class="token operator">*</span><span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span>

    sigma <span class="token operator">=</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token operator">*</span>kernel_size<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">kernel_function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">-</span>center<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y<span class="token operator">-</span>center<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>sigma<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    kernel <span class="token operator">=</span> np<span class="token punctuation">.</span>fromfunction<span class="token punctuation">(</span>kernel_function<span class="token punctuation">,</span> <span class="token punctuation">(</span>kernel_size<span class="token punctuation">,</span> kernel_size<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> kernel <span class="token operator">/</span> np<span class="token punctuation">.</span>linalg<span class="token punctuation">.</span>norm<span class="token punctuation">(</span>kernel<span class="token punctuation">)</span>
</code></pre>
</div></div></div>

<p>Though it is entirely possible to create a Gaussian kernel whose standard deviation is independent on the kernel size, we have decided to enforce a relation between the two in this chapter.
As always, we encourage you to play with the code and create your own Gaussian kernels any way you want!
As a note, all the kernels will be scaled (normalized) at the end by the sum of all internal elements.
This ensures that the output of the convolution will not have an obnoxious scale factor associated with it.</p>
<p>Below are a few images generated by applying a kernel generated with the code above to a black and white image of a circle.</p>
<p>
  <img class="center" src="../res/circle_blur.png" style="width:100%">
</p>


<p>In (a), we show the original image, which is just a white circle at the center of a <script type="math/tex; ">50\times 50</script> grid.
In (b), we show the image after convolution with a <script type="math/tex; ">3\times 3</script> kernel.
In (c), we show the image after convolution with a <script type="math/tex; ">20\times 20</script> kernel.
Here, we see that (c) is significantly fuzzier than (b), which is a direct consequence of the kernel size.</p>
<p>There is a lot more that we could talk about, but now is a good time to move on to a slightly more complicated convolutional method: the Sobel operator.</p>
<h2 id="the-sobel-operator">The Sobel operator</h2>
<p>The Sobel operator effectively performs a gradient operation on an image by highlighting areas where a large change has been made.
In essence, this means that this operation can be thought of as a naïve edge detector.
Essentially, the <script type="math/tex; ">n</script>-dimensional Sobel operator is composed of <script type="math/tex; ">n</script> separate gradient convolutions (one for each dimension) that are then combined together into a final output array.
Again, for the purposes of this chapter, we will stick to two dimensions, which will be composed of two separate gradients along the <script type="math/tex; ">x</script> and <script type="math/tex; ">y</script> directions.
Each gradient will be created by convolving our image with their corresponding Sobel operator:</p>
<p><script type="math/tex; mode=display">
\begin{align}
S_x &= \left(\begin{bmatrix}
1 \\
2 \\
1 \\
\end{bmatrix} \otimes [1~0~-1]
\right) = \begin{bmatrix}
1 & 0 & -1 \\
2 & 0 & -2 \\
1 & 0 & -1 \\
\end{bmatrix}\\

S_y &= \left(
\begin{bmatrix}
1 \\
0 \\
-1 \\
\end{bmatrix} \otimes [1~2~1]
\right) = \begin{bmatrix}
1 & 2 & 1 \\
0 & 0 & 0 \\
-1 & -2 & -1 \\
\end{bmatrix}.
\end{align}
</script></p>
<p>The gradients can then be found with a convolution, such that:</p>
<p><script type="math/tex; mode=display">
\begin{align}
G_x &= S_x*A \\
G_y &= S_y*A.
\end{align}
</script></p>
<p>Here, <script type="math/tex; ">A</script> is the input array or image.
Finally, these gradients can be summed in quadrature to find the total Sobel operator or image gradient:</p>
<p><script type="math/tex; mode=display">
G_{\text{total}} = \sqrt{G_x^2 + G_y^2}
</script></p>
<p>So let us now show what it does in practice:</p>
<p>
  <img class="center" src="../res/sobel_filters.png" style="width:100%">
</p>

<p>In this diagram, we start with the circle image on the right, and then convolve it with the <script type="math/tex; ">S_x</script> and <script type="math/tex; ">S_y</script> operators to find the gradients along <script type="math/tex; ">x</script> and <script type="math/tex; ">y</script> before summing them in quadrature to get the final image gradient.
Here, we see that the edges of our input image have been highlighted, showing outline of our circle.
This is why the Sobel operator is also known as naïve edge detection and is an integral component to many more sophisticated edge detection methods like one proposed by Canny <a href="#cite-1">[1]</a>.</p>
<p>In code, the Sobel operator involves first finding the operators in <script type="math/tex; ">x</script> and <script type="math/tex; ">y</script> and then applying them with a traditional convolution:</p>
<div class="code-method"><div class="code-method-definition"></div><div class="code-method-code"><div class="code-method-sample" data-lang="jl" data-name="Julia"><pre class="language-"><code class="lang-julia"><span class="token keyword">function</span> create_sobel_operators<span class="token punctuation">(</span><span class="token punctuation">)</span>
    Sx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1.0</span> <span class="token number">0.0</span> <span class="token number">1.0</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">9</span>
    Sy <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1.0</span> <span class="token number">2.0</span> <span class="token number">1.0</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">9</span>

    <span class="token keyword">return</span> Sx<span class="token punctuation">,</span> Sy
<span class="token keyword">end</span>

<span class="token keyword">function</span> compute_sobel<span class="token punctuation">(</span>signal<span class="token punctuation">)</span>
    Sx<span class="token punctuation">,</span> Sy <span class="token operator">=</span> create_sobel_operators<span class="token punctuation">(</span><span class="token punctuation">)</span>

    Gx <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>signal<span class="token punctuation">,</span> Sx<span class="token punctuation">,</span> size<span class="token punctuation">(</span>signal<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token operator">+</span> size<span class="token punctuation">(</span>Sx<span class="token punctuation">)</span><span class="token punctuation">)</span>
    Gy <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>signal<span class="token punctuation">,</span> Sy<span class="token punctuation">,</span> size<span class="token punctuation">(</span>signal<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token operator">+</span> size<span class="token punctuation">(</span>Sy<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> sqrt<span class="token punctuation">.</span><span class="token punctuation">(</span>Gx<span class="token punctuation">.</span><span class="token operator">^</span><span class="token number">2</span> <span class="token punctuation">.</span><span class="token operator">+</span> Gy<span class="token punctuation">.</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="code-method-sample" data-lang="py" data-name="Python"><pre class="language-"><code class="lang-python"><span class="token keyword">def</span> <span class="token function">create_sobel_operators</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    Sx <span class="token operator">=</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">9</span>
    Sy <span class="token operator">=</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">9</span>

    <span class="token keyword">return</span> Sx<span class="token punctuation">,</span> Sy

<span class="token keyword">def</span> <span class="token function">sum_matrix_dimensions</span><span class="token punctuation">(</span>mat1<span class="token punctuation">,</span> mat2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>mat1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> mat2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
            mat1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> mat2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">compute_sobel</span><span class="token punctuation">(</span>signal<span class="token punctuation">)</span><span class="token punctuation">:</span>
    Sx<span class="token punctuation">,</span> Sy <span class="token operator">=</span> create_sobel_operators<span class="token punctuation">(</span><span class="token punctuation">)</span>

    Gx <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>signal<span class="token punctuation">,</span> Sx<span class="token punctuation">,</span> sum_matrix_dimensions<span class="token punctuation">(</span>signal<span class="token punctuation">,</span> Sx<span class="token punctuation">)</span><span class="token punctuation">)</span>
    Gy <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>signal<span class="token punctuation">,</span> Sy<span class="token punctuation">,</span> sum_matrix_dimensions<span class="token punctuation">(</span>signal<span class="token punctuation">,</span> Sy<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>np<span class="token punctuation">.</span>power<span class="token punctuation">(</span>Gx<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> np<span class="token punctuation">.</span>power<span class="token punctuation">(</span>Gy<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div></div></div>

<p>With that, I believe we are at a good place to stop discussions on two-dimensional convolutions.
We will definitely return to this topic in the future as new algorithms require more information.</p>
<h2 id="example-code">Example Code</h2>
<p>For the code in this section, we have modified the visualizations from the <a href="../1d/1d.html">one-dimensional convolution chapter</a> to add a two-dimensional variant for blurring an image of random white noise.
We have also added code to create the Gaussian kernel and Sobel operator and apply it to the circle, as shown in the text.</p>
<div class="code-method"><div class="code-method-definition"></div><div class="code-method-code"><div class="code-method-sample" data-lang="jl" data-name="Julia"><pre class="language-"><code class="lang-julia"><span class="token keyword">using</span> DelimitedFiles
<span class="token keyword">using</span> LinearAlgebra

<span class="token keyword">function</span> convolve_linear<span class="token punctuation">(</span>signal<span class="token punctuation">::</span>Array<span class="token punctuation">{</span>T<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> filter<span class="token punctuation">::</span>Array<span class="token punctuation">{</span>T<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                         output_size<span class="token punctuation">)</span> where <span class="token punctuation">{</span>T <span class="token operator">&lt;:</span> Number<span class="token punctuation">}</span>

    <span class="token comment"># convolutional output</span>
    out <span class="token operator">=</span> Array<span class="token punctuation">{</span>Float64<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">(</span>undef<span class="token punctuation">,</span> output_size<span class="token punctuation">)</span>
    sum <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>output_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>output_size<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
            <span class="token keyword">for</span> k <span class="token operator">=</span> max<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> i<span class="token operator">-</span>size<span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>i
                <span class="token keyword">for</span> l <span class="token operator">=</span> max<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token operator">-</span>size<span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>j
                    <span class="token keyword">if</span> k <span class="token operator">&lt;=</span> size<span class="token punctuation">(</span>signal<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> i<span class="token operator">-</span>k<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&lt;=</span> size<span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
                       l <span class="token operator">&lt;=</span> size<span class="token punctuation">(</span>signal<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> j<span class="token operator">-</span>l<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&lt;=</span> size<span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
                        sum <span class="token operator">+=</span> signal<span class="token punctuation">[</span>k<span class="token punctuation">,</span>l<span class="token punctuation">]</span> <span class="token operator">*</span> filter<span class="token punctuation">[</span>i<span class="token operator">-</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token operator">-</span>l<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>
                    <span class="token keyword">end</span>
                <span class="token keyword">end</span>
            <span class="token keyword">end</span>

            out<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> sum
            sum <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>

    <span class="token keyword">return</span> out
<span class="token keyword">end</span>

<span class="token keyword">function</span> create_gaussian_kernel<span class="token punctuation">(</span>kernel_size<span class="token punctuation">)</span>

    kernel <span class="token operator">=</span> zeros<span class="token punctuation">(</span>kernel_size<span class="token punctuation">,</span> kernel_size<span class="token punctuation">)</span>

    <span class="token comment"># The center must be offset by 0.5 to find the correct index</span>
    center <span class="token operator">=</span> kernel_size <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span>

    sigma <span class="token operator">=</span> sqrt<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token operator">*</span>kernel_size<span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>kernel_size
        <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>kernel_size
            kernel<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> exp<span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">-</span>center<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>j<span class="token operator">-</span>center<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>sigma<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>

    <span class="token keyword">return</span> normalize<span class="token punctuation">(</span>kernel<span class="token punctuation">)</span>

<span class="token keyword">end</span>

<span class="token keyword">function</span> create_sobel_operators<span class="token punctuation">(</span><span class="token punctuation">)</span>
    Sx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1.0</span> <span class="token number">0.0</span> <span class="token number">1.0</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">9</span>
    Sy <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1.0</span> <span class="token number">2.0</span> <span class="token number">1.0</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">9</span>

    <span class="token keyword">return</span> Sx<span class="token punctuation">,</span> Sy
<span class="token keyword">end</span>

<span class="token keyword">function</span> compute_sobel<span class="token punctuation">(</span>signal<span class="token punctuation">)</span>
    Sx<span class="token punctuation">,</span> Sy <span class="token operator">=</span> create_sobel_operators<span class="token punctuation">(</span><span class="token punctuation">)</span>

    Gx <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>signal<span class="token punctuation">,</span> Sx<span class="token punctuation">,</span> size<span class="token punctuation">(</span>signal<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token operator">+</span> size<span class="token punctuation">(</span>Sx<span class="token punctuation">)</span><span class="token punctuation">)</span>
    Gy <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>signal<span class="token punctuation">,</span> Sy<span class="token punctuation">,</span> size<span class="token punctuation">(</span>signal<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token operator">+</span> size<span class="token punctuation">(</span>Sy<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> sqrt<span class="token punctuation">.</span><span class="token punctuation">(</span>Gx<span class="token punctuation">.</span><span class="token operator">^</span><span class="token number">2</span> <span class="token punctuation">.</span><span class="token operator">+</span> Gy<span class="token punctuation">.</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment"># Simple function to create a square grid with a circle embedded inside of it</span>
<span class="token keyword">function</span> create_circle<span class="token punctuation">(</span>image_resolution<span class="token punctuation">,</span> grid_extents<span class="token punctuation">,</span> radius<span class="token punctuation">)</span>
    out <span class="token operator">=</span> zeros<span class="token punctuation">(</span>image_resolution<span class="token punctuation">,</span> image_resolution<span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>image_resolution
        x_position <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>grid_extents<span class="token operator">/</span>image_resolution<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token operator">*</span>grid_extents
        <span class="token keyword">for</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>image_resolution
            y_position <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>grid_extents<span class="token operator">/</span>image_resolution<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token operator">*</span>grid_extents
            <span class="token keyword">if</span> x_position<span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> y_position<span class="token operator">^</span><span class="token number">2</span> <span class="token operator">&lt;=</span> radius<span class="token operator">^</span><span class="token number">2</span>
                out<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span>
            <span class="token keyword">end</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span> 

    <span class="token keyword">return</span> out
<span class="token keyword">end</span>

<span class="token keyword">function</span> main<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># Random distribution in x</span>
    x <span class="token operator">=</span> rand<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>

    <span class="token comment"># Gaussian signals</span>
    y <span class="token operator">=</span> <span class="token punctuation">[</span>exp<span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>j<span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">.01</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token number">100</span><span class="token punctuation">,</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">100</span><span class="token punctuation">]</span>

    <span class="token comment"># Normalization is not strictly necessary, but good practice</span>
    normalize<span class="token operator">!</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    normalize<span class="token operator">!</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>

    <span class="token comment"># full convolution, output will be the size of x + y</span>
    full_linear_output <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> size<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token operator">+</span> size<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># simple boundaries</span>
    simple_linear_output <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> size<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># outputting convolutions to different files for plotting in external code</span>
    writedlm<span class="token punctuation">(</span><span class="token string">&quot;full_linear.dat&quot;</span><span class="token punctuation">,</span> full_linear_output<span class="token punctuation">)</span>
    writedlm<span class="token punctuation">(</span><span class="token string">&quot;simple_linear.dat&quot;</span><span class="token punctuation">,</span> simple_linear_output<span class="token punctuation">)</span>

    <span class="token comment"># creating simple circle and 2 different Gaussian kernels</span>
    circle <span class="token operator">=</span> create_circle<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">)</span>

    normalize<span class="token operator">!</span><span class="token punctuation">(</span>circle<span class="token punctuation">)</span>

    small_kernel <span class="token operator">=</span> create_gaussian_kernel<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    large_kernel <span class="token operator">=</span> create_gaussian_kernel<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span>

    small_kernel_output <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>circle<span class="token punctuation">,</span> small_kernel<span class="token punctuation">,</span>
                                          size<span class="token punctuation">(</span>circle<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token operator">+</span>size<span class="token punctuation">(</span>small_kernel<span class="token punctuation">)</span><span class="token punctuation">)</span>
    large_kernel_output <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>circle<span class="token punctuation">,</span> large_kernel<span class="token punctuation">,</span>
                                          size<span class="token punctuation">(</span>circle<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token operator">+</span>size<span class="token punctuation">(</span>large_kernel<span class="token punctuation">)</span><span class="token punctuation">)</span>

    writedlm<span class="token punctuation">(</span><span class="token string">&quot;small_kernel.dat&quot;</span><span class="token punctuation">,</span> small_kernel_output<span class="token punctuation">)</span>
    writedlm<span class="token punctuation">(</span><span class="token string">&quot;large_kernel.dat&quot;</span><span class="token punctuation">,</span> large_kernel_output<span class="token punctuation">)</span>

    <span class="token comment"># Using the circle for Sobel operations as well</span>
    sobel_output <span class="token operator">=</span> compute_sobel<span class="token punctuation">(</span>circle<span class="token punctuation">)</span>

    writedlm<span class="token punctuation">(</span><span class="token string">&quot;sobel_output.dat&quot;</span><span class="token punctuation">,</span> sobel_output<span class="token punctuation">)</span>

<span class="token keyword">end</span>
</code></pre>
</div><div class="code-method-sample" data-lang="py" data-name="Python"><pre class="language-"><code class="lang-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> contextlib <span class="token keyword">import</span> suppress


<span class="token keyword">def</span> <span class="token function">convolve_linear</span><span class="token punctuation">(</span>signal<span class="token punctuation">,</span> <span class="token builtin">filter</span><span class="token punctuation">,</span> output_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
    out <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>output_size<span class="token punctuation">)</span>
    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>output_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>output_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token operator">-</span><span class="token builtin">filter</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">for</span> l <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> j<span class="token operator">-</span><span class="token builtin">filter</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">with</span> suppress<span class="token punctuation">(</span>IndexError<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        <span class="token builtin">sum</span> <span class="token operator">+=</span> signal<span class="token punctuation">[</span>k<span class="token punctuation">,</span> l<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">filter</span><span class="token punctuation">[</span>i<span class="token operator">-</span>k<span class="token punctuation">,</span> j<span class="token operator">-</span>l<span class="token punctuation">]</span>
            out<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">sum</span>
            <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">return</span> out


<span class="token keyword">def</span> <span class="token function">create_gaussian_kernel</span><span class="token punctuation">(</span>kernel_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
    kernel <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>kernel_size<span class="token punctuation">,</span> kernel_size<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># The center must be offset by 0.5 to find the correct index</span>
    center <span class="token operator">=</span> kernel_size<span class="token operator">*</span><span class="token number">0.5</span> <span class="token operator">+</span> <span class="token number">0.5</span>

    sigma <span class="token operator">=</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token operator">*</span>kernel_size<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">kernel_function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">-</span>center<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y<span class="token operator">-</span>center<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>sigma<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    kernel <span class="token operator">=</span> np<span class="token punctuation">.</span>fromfunction<span class="token punctuation">(</span>kernel_function<span class="token punctuation">,</span> <span class="token punctuation">(</span>kernel_size<span class="token punctuation">,</span> kernel_size<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> kernel <span class="token operator">/</span> np<span class="token punctuation">.</span>linalg<span class="token punctuation">.</span>norm<span class="token punctuation">(</span>kernel<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">create_sobel_operators</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    Sx <span class="token operator">=</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">9</span>
    Sy <span class="token operator">=</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">9</span>

    <span class="token keyword">return</span> Sx<span class="token punctuation">,</span> Sy

<span class="token keyword">def</span> <span class="token function">sum_matrix_dimensions</span><span class="token punctuation">(</span>mat1<span class="token punctuation">,</span> mat2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>mat1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> mat2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
            mat1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> mat2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">compute_sobel</span><span class="token punctuation">(</span>signal<span class="token punctuation">)</span><span class="token punctuation">:</span>
    Sx<span class="token punctuation">,</span> Sy <span class="token operator">=</span> create_sobel_operators<span class="token punctuation">(</span><span class="token punctuation">)</span>

    Gx <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>signal<span class="token punctuation">,</span> Sx<span class="token punctuation">,</span> sum_matrix_dimensions<span class="token punctuation">(</span>signal<span class="token punctuation">,</span> Sx<span class="token punctuation">)</span><span class="token punctuation">)</span>
    Gy <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>signal<span class="token punctuation">,</span> Sy<span class="token punctuation">,</span> sum_matrix_dimensions<span class="token punctuation">(</span>signal<span class="token punctuation">,</span> Sy<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>np<span class="token punctuation">.</span>power<span class="token punctuation">(</span>Gx<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> np<span class="token punctuation">.</span>power<span class="token punctuation">(</span>Gy<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">create_circle</span><span class="token punctuation">(</span>image_resolution<span class="token punctuation">,</span> grid_extents<span class="token punctuation">,</span> radius<span class="token punctuation">)</span><span class="token punctuation">:</span>
    out <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>image_resolution<span class="token punctuation">,</span> image_resolution<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>image_resolution<span class="token punctuation">)</span><span class="token punctuation">:</span>
        x_position <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">*</span> grid_extents <span class="token operator">/</span> image_resolution<span class="token punctuation">)</span>
                      <span class="token operator">-</span> <span class="token number">0.5</span> <span class="token operator">*</span> grid_extents<span class="token punctuation">)</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>image_resolution<span class="token punctuation">)</span><span class="token punctuation">:</span>
            y_position <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>j <span class="token operator">*</span> grid_extents <span class="token operator">/</span> image_resolution<span class="token punctuation">)</span>
                          <span class="token operator">-</span> <span class="token number">0.5</span> <span class="token operator">*</span> grid_extents<span class="token punctuation">)</span>
            <span class="token keyword">if</span> x_position <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> y_position <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">&lt;=</span> radius <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">:</span>
                out<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span>

    <span class="token keyword">return</span> out


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment"># Random distribution in x</span>
    x <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>rand<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>

    <span class="token comment"># Gaussian signals</span>
    <span class="token keyword">def</span> <span class="token function">create_gaussian_signals</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span>
                        <span class="token punctuation">(</span><span class="token punctuation">(</span>j<span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">.01</span><span class="token punctuation">)</span>
    y <span class="token operator">=</span> np<span class="token punctuation">.</span>fromfunction<span class="token punctuation">(</span>create_gaussian_signals<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># Normalization is not strictly necessary, but good practice</span>
    x <span class="token operator">/=</span> np<span class="token punctuation">.</span>linalg<span class="token punctuation">.</span>norm<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    y <span class="token operator">/=</span> np<span class="token punctuation">.</span>linalg<span class="token punctuation">.</span>norm<span class="token punctuation">(</span>y<span class="token punctuation">)</span>

    <span class="token comment"># full convolution, output will be the size of x + y</span>
    full_linear_output <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> sum_matrix_dimensions<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># simple boundaries</span>
    simple_linear_output <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> x<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>

    np<span class="token punctuation">.</span>savetxt<span class="token punctuation">(</span><span class="token string">&quot;full_linear.dat&quot;</span><span class="token punctuation">,</span> full_linear_output<span class="token punctuation">)</span>
    np<span class="token punctuation">.</span>savetxt<span class="token punctuation">(</span><span class="token string">&quot;simple_linear.dat&quot;</span><span class="token punctuation">,</span> simple_linear_output<span class="token punctuation">)</span>

    <span class="token comment"># creating simple circle and 2 different Gaussian kernels</span>
    circle <span class="token operator">=</span> create_circle<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span>

    circle <span class="token operator">=</span> circle <span class="token operator">/</span> np<span class="token punctuation">.</span>linalg<span class="token punctuation">.</span>norm<span class="token punctuation">(</span>circle<span class="token punctuation">)</span>

    small_kernel <span class="token operator">=</span> create_gaussian_kernel<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    large_kernel <span class="token operator">=</span> create_gaussian_kernel<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span>

    small_kernel_output <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>circle<span class="token punctuation">,</span> small_kernel<span class="token punctuation">,</span>
                                          sum_matrix_dimensions<span class="token punctuation">(</span>circle<span class="token punctuation">,</span>
                                                                small_kernel<span class="token punctuation">)</span><span class="token punctuation">)</span>

    large_kernel_output <span class="token operator">=</span> convolve_linear<span class="token punctuation">(</span>circle<span class="token punctuation">,</span> large_kernel<span class="token punctuation">,</span>
                                          sum_matrix_dimensions<span class="token punctuation">(</span>circle<span class="token punctuation">,</span>
                                                                large_kernel<span class="token punctuation">)</span><span class="token punctuation">)</span>

    np<span class="token punctuation">.</span>savetxt<span class="token punctuation">(</span><span class="token string">&quot;small_kernel.dat&quot;</span><span class="token punctuation">,</span> small_kernel_output<span class="token punctuation">)</span>
    np<span class="token punctuation">.</span>savetxt<span class="token punctuation">(</span><span class="token string">&quot;large_kernel.dat&quot;</span><span class="token punctuation">,</span> large_kernel_output<span class="token punctuation">)</span>

    circle <span class="token operator">=</span> create_circle<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span>

    <span class="token comment"># Normalization</span>
    circle <span class="token operator">=</span> circle <span class="token operator">/</span> np<span class="token punctuation">.</span>linalg<span class="token punctuation">.</span>norm<span class="token punctuation">(</span>circle<span class="token punctuation">)</span>

    <span class="token comment"># using the circle for sobel operations as well</span>
    sobel_output <span class="token operator">=</span> compute_sobel<span class="token punctuation">(</span>circle<span class="token punctuation">)</span>

    np<span class="token punctuation">.</span>savetxt<span class="token punctuation">(</span><span class="token string">&quot;sobel_output.dat&quot;</span><span class="token punctuation">,</span> sobel_output<span class="token punctuation">)</span>
</code></pre>
</div></div></div>

<script>
MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
</script>

<h3 id="bibliography">Bibliography</h3>
<p><div class="references"><div class="citation"><div class="citation-number" id="cite-1">1.</div><div class="citation-text">Canny, John, A computational approach to edge detection, <i>Ieee</i>, 1986.</div></div></div></p>
<h2 id="license">License</h2>
<h5 id="code-examples">Code Examples</h5>
<p>The code examples are licensed under the MIT license (found in <a href="https://github.com/algorithm-archivists/algorithm-archive/blob/master/LICENSE.md" target="_blank">LICENSE.md</a>).</p>
<h5 id="imagesgraphics">Images/Graphics</h5>
<ul>
<li>The image &quot;<a href="../res/heart_8bit.png">8bit Heart</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The image &quot;<a href="../res/circle_blur.png">Circle Blur</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The image &quot;<a href="../res/sobel_filters.png">Sobel Filters</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The video &quot;<a href="../res/2d.mp4">2D Convolution</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and <a href="https://github.com/3b1b" target="_blank">Grant Sanderson</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
</ul>
<h5 id="text">Text</h5>
<p>The text of this chapter was written by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
<p><a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank"><p><img class="center" src="../../cc/CC-BY-SA_icon.svg"></p></a></p>
<h5 id="pull-requests">Pull Requests</h5>
<p>After initial licensing (<a href="https://github.com/algorithm-archivists/algorithm-archive/pull/560" target="_blank">#560</a>), the following pull requests have modified the text or graphics of this chapter:</p>
<ul>
<li>none</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../multiplication/multiplication.html" class="navigation navigation-prev " aria-label="Previous page: Multiplication as a Convolution">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../convolutional_theorem/convolutional_theorem.html" class="navigation navigation-next " aria-label="Next page: Convolutional Theorem">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Convolutions of Images (2D)","level":"1.6.5.3","depth":3,"next":{"title":"Convolutional Theorem","level":"1.6.5.4","depth":3,"path":"contents/convolutions/convolutional_theorem/convolutional_theorem.md","ref":"contents/convolutions/convolutional_theorem/convolutional_theorem.md","articles":[]},"previous":{"title":"Multiplication as a Convolution","level":"1.6.5.2","depth":3,"path":"contents/convolutions/multiplication/multiplication.md","ref":"contents/convolutions/multiplication/multiplication.md","articles":[]},"dir":"ltr"},"config":{"plugins":["mathjax@https://github.com/algorithm-archivists/plugin-mathjax","bibtex-cite","wordcount","api-language-selector@https://github.com/algorithm-archivists/gitbook-plugin-api-language-selector.git","include-codeblock","bulk-redirect","prism","-highlight"],"root":"./","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"api-language-selector":{"languages":[{"lang":"jl","name":"Julia","default":true},{"lang":"bash","name":"Bash"},{"lang":"cs","name":"C#"},{"lang":"cpp","name":"C++"},{"lang":"c","name":"C"},{"lang":"c8","name":"chip-8"},{"lang":"py","name":"Python"},{"lang":"js","name":"JavaScript"},{"lang":"scratch","name":"Scratch"},{"lang":"hs","name":"Haskell"},{"lang":"rs","name":"Rust"},{"lang":"ml","name":"OCaml"},{"lang":"java","name":"Java"},{"lang":"clj","name":"Clojure"},{"lang":"elm","name":"Elm"},{"lang":"LabVIEW","name":"LabVIEW"},{"lang":"d","name":"D"},{"lang":"go","name":"Go"},{"lang":"swift","name":"Swift"},{"lang":"racket","name":"Racket"},{"lang":"m","name":"Matlab"},{"lang":"r","name":"R"},{"lang":"ti83b","name":"TI-83 Basic"},{"lang":"lua","name":"Lua"},{"lang":"crystal","name":"Crystal"},{"lang":"php","name":"PHP"},{"lang":"lisp","name":"Common Lisp"},{"lang":"nim","name":"Nim"},{"lang":"asm-x64","name":"X86-64 Assembly"},{"lang":"f90","name":"Fortran90"},{"lang":"factor","name":"Factor"},{"lang":"ws","name":"Whitespace"},{"lang":"scala","name":"Scala"},{"lang":"emojic","name":"Emojicode"},{"lang":"lolcode","name":"LOLCODE"},{"lang":"piet","name":"Piet"},{"lang":"ss","name":"Scheme"},{"lang":"ps1","name":"PowerShell"},{"lang":"v","name":"Vlang"},{"lang":"coffee","name":"CoffeeScript"},{"lang":"kotlin","name":"Kotlin"},{"lang":"ts","name":"TypeScript"},{"lang":"vim","name":"VimL"},{"lang":"coco","name":"Coconut"},{"lang":"dart","name":"Dart"}]},"prism":{"lang":{"asm-x64":"nasm"},"ignore":["emojicode","text"],"css":["prismjs/themes/prism-tomorrow.css"]},"wordcount":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"bulk-redirect":{"basepath":"/","redirectsFile":"redirects.json"},"bibtex-cite":{},"mathjax":{"forceSVG":false,"version":"2.6.1"},"include-codeblock":{"check":false,"edit":false,"lang":"","fixlang":true,"template":"default","theme":"chrome","unindent":true},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","lunr":{"maxIndexSize":1000000000},"honkit":">= 3.0.0","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"bibCount":0,"variables":{},"title":"Arcane Algorithm Archive","bib":[{"citationKey":"CT1965","entryType":"ARTICLE","entryTags":{"TITLE":"An algorithm for the machine calculation of complex Fourier series","AUTHOR":"Cooley, James W and Tukey, John W","JOURNAL":"Mathematics of computation","VOLUME":"19","NUMBER":"90","PAGES":"297--301","YEAR":"1965","PUBLISHER":"JSTOR"}},{"citationKey":"JM1973","entryType":"ARTICLE","entryTags":{"TITLE":"On the identification of the convex hull of a finite set of points in the plane","AUTHOR":"Jarvis, Ray A","JOURNAL":"Information processing letters","VOLUME":"2","NUMBER":"1","PAGES":"18--21","YEAR":"1973","PUBLISHER":"Elsevier"}},{"citationKey":"GS1972","entryType":"ARTICLE","entryTags":{"TITLE":"An efficient algorithm for determining the convex hull of a finite planar set","AUTHOR":"Graham, Ronald L","JOURNAL":"Information processing letters","VOLUME":"1","NUMBER":"4","PAGES":"132--133","YEAR":"1972","PUBLISHER":"Elsevier"}},{"citationKey":"GNUPLOT","entryType":"MISC","entryTags":{"TITLE":"Gnuplot 5.0: An Interactive Plotting Program, Official Gnuplot Documentation","AUTHOR":"Williams, T and Kelley, C","YEAR":"2015"}},{"citationKey":"BEDE725","entryType":"BOOK","entryTags":{"TITLE":"Bede, the Reckoning of Time","AUTHOR":"Venerabilis, Beda and others","VOLUME":"29","YEAR":"1999","PUBLISHER":"Liverpool University Press"}},{"citationKey":"DICTCOMPUTUS","entryType":"MISC","entryTags":{"TITLE":"Dictionary.com definition of computus","URL":"https://www.merriam-webster.com/dictionary/computus","YEAR":"2020"}},{"citationKey":"COMPUTUS1876","entryType":"ARTICLE","entryTags":{"TITLE":"To find Easter: a new York correspondent sends us the following","AUTHOR":"unknown","JOURNAL":"Nature","YEAR":"1876"}},{"citationKey":"BIEN2004","entryType":"ARTICLE","entryTags":{"TITLE":"Gauss and beyond: The making of Easter algorithms","AUTHOR":"Bien, Reinhold","JOURNAL":"Archive for history of exact sciences","VOLUME":"58","NUMBER":"5","PAGES":"439--452","YEAR":"2004","PUBLISHER":"Springer"}},{"citationKey":"SERVOIS","entryType":"INPROCEEDINGS","entryTags":{"TITLE":"84 Calendrier","AUTHOR":"Servois, M","BOOKTITLE":"Annales de Mathématiques pures et appliquées","VOLUME":"4","NUMBER":"1813-1814","PAGES":"84--90"}},{"citationKey":"STANDISH2004","entryType":"ARTICLE","entryTags":{"TITLE":"The astronomical unit now","AUTHOR":"Standish, EM","JOURNAL":"Proceedings of the International Astronomical Union","VOLUME":"2004","NUMBER":"IAUC196","PAGES":"163--179","YEAR":"2004","PUBLISHER":"Cambridge University Press"}},{"citationKey":"LUNAR_MONTH_WIKI","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: Lunar Month","URL":"https://en.wikipedia.org/wiki/Lunar_month","YEAR":"2020"}},{"citationKey":"SELF-SIMILAR","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: Self-similarity","URL":"https://en.wikipedia.org/wiki/Self-similarity","YEAR":"2019"}},{"citationKey":"HAUSDORFF","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: Hausdorff dimension","URL":"https://en.wikipedia.org/wiki/Hausdorff_dimension","YEAR":"2019"}},{"citationKey":"3B1BFRACTAL","entryType":"MISC","entryTags":{"AUTHOR":"Sanderson, G","TITLE":"3blue1brown: Fractals are typically not self-similar","URL":"https://www.youtube.com/watch?v=gB9n2gHsHN4","YEAR":"2017"}},{"citationKey":"MANDELBROT1983FRACTAL","entryType":"BOOK","entryTags":{"TITLE":"The fractal geometry of nature","AUTHOR":"Mandelbrot, Benoit B","VOLUME":"173","YEAR":"1983","PUBLISHER":"WH freeman New York"}},{"citationKey":"MANDELBROT1967LONG","entryType":"ARTICLE","entryTags":{"TITLE":"How long is the coast of Britain? Statistical self-similarity and fractional dimension","AUTHOR":"Mandelbrot, Benoit","JOURNAL":"science","VOLUME":"156","NUMBER":"3775","PAGES":"636--638","YEAR":"1967","PUBLISHER":"American Association for the Advancement of Science"}},{"citationKey":"JAMPOUR2010NEW","entryType":"ARTICLE","entryTags":{"TITLE":"A new fast technique for fingerprint identification with fractal and chaos game theory","AUTHOR":"Jampour, Mahdi and Yaghoobi, Mahdi and Ashourzadeh, Maryam and Soleimani, Adel","JOURNAL":"Fractals","VOLUME":"18","NUMBER":"03","PAGES":"293--300","YEAR":"2010","PUBLISHER":"World Scientific"}},{"citationKey":"FRACTAL-COMPRESSION","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: Fractal Compression","URL":"https://en.wikipedia.org/wiki/Fractal_compression","YEAR":"2019"}},{"citationKey":"SAUPE1994REVIEW","entryType":"ARTICLE","entryTags":{"TITLE":"A review of the fractal image compression literature","AUTHOR":"Saupe, Dietmar and Hamzaoui, Raouf","JOURNAL":"ACM SIGGRAPH Computer Graphics","VOLUME":"28","NUMBER":"4","PAGES":"268--276","YEAR":"1994","PUBLISHER":"ACM"}},{"citationKey":"GNEITING2012ESTIMATORS","entryType":"ARTICLE","entryTags":{"TITLE":"Estimators of fractal dimension: Assessing the roughness of time series and spatial data","AUTHOR":"Gneiting, Tilmann and Ševčíková, Hana and Percival, Donald B","JOURNAL":"Statistical Science","PAGES":"247--277","YEAR":"2012","PUBLISHER":"JSTOR"}},{"citationKey":"HUTCHINSON1981FRACTALS","entryType":"ARTICLE","entryTags":{"TITLE":"Fractals and self similarity","AUTHOR":"Hutchinson, John E","JOURNAL":"Indiana University Mathematics Journal","VOLUME":"30","NUMBER":"5","PAGES":"713--747","YEAR":"1981","PUBLISHER":"JSTOR"}},{"citationKey":"HUTCHINSON-OPERATOR","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: Hutchinson Operator","URL":"https://en.wikipedia.org/wiki/Hutchinson_operator","YEAR":"2019"}},{"citationKey":"CHAOS-GAME","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: Chaos Game","URL":"https://en.wikipedia.org/wiki/Chaos_game","YEAR":"2019"}},{"citationKey":"CHAOS-GAME-WOLF","entryType":"MISC","entryTags":{"TITLE":"Wolfram: Chaos Game","URL":"http://mathworld.wolfram.com/ChaosGame.html","YEAR":"2019"}},{"citationKey":"BARNSLEY2014FRACTALS","entryType":"BOOK","entryTags":{"TITLE":"Fractals everywhere","AUTHOR":"Barnsley, Michael F","YEAR":"2014","PUBLISHER":"Academic press"}},{"citationKey":"HSV","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: HSL and HSV","URL":"https://en.wikipedia.org/wiki/HSL_and_HSV","YEAR":"2020"}},{"citationKey":"SCHLOSS2019","entryType":"ARTICLE","entryTags":{"TITLE":"Massively parallel split-step Fourier techniques for simulating quantum systems on graphics processing units","AUTHOR":"Schloss, James","YEAR":"2019"}},{"citationKey":"PETHICK2008","entryType":"BOOK","entryTags":{"TITLE":"Bose--Einstein condensation in dilute gases","AUTHOR":"Pethick, Christopher J and Smith, Henrik","YEAR":"2008","PUBLISHER":"Cambridge university press"}},{"citationKey":"WEGERT2012","entryType":"BOOK","entryTags":{"TITLE":"Visual complex functions: an introduction with phase portraits","AUTHOR":"Wegert, Elias","YEAR":"2012","PUBLISHER":"Springer Science \\& Business Media"}},{"citationKey":"POELKEDOMAIN","entryType":"ARTICLE","entryTags":{"TITLE":"Domain Coloring of Complex Functions","AUTHOR":"Poelke, Konstantin and Polthier, Konrad"}},{"citationKey":"LUNDMARK2004","entryType":"ARTICLE","entryTags":{"TITLE":"Visualizing complex analytic functions using domain coloring","AUTHOR":"Lundmark, Hans","JOURNAL":"Recuperado el","VOLUME":"24","YEAR":"2004"}},{"citationKey":"GIMP_BUCKET","entryType":"MISC","entryTags":{"TITLE":"Bucket Fill in Gimp","URL":"https://docs.gimp.org/2.10/en/gimp-tool-bucket-fill.html","YEAR":"2020"}},{"citationKey":"TORBERT2016","entryType":"BOOK","entryTags":{"TITLE":"Applied computer science","AUTHOR":"Torbert, Shane","YEAR":"2016","PAGES":"158","PUBLISHER":"Springer"}},{"citationKey":"CANNY1986COMPUTATIONAL","entryType":"ARTICLE","entryTags":{"TITLE":"A computational approach to edge detection","AUTHOR":"Canny, John","JOURNAL":"IEEE Transactions on pattern analysis and machine intelligence","NUMBER":"6","PAGES":"679--698","YEAR":"1986","PUBLISHER":"Ieee"}},{"citationKey":"MORRIS1978COUNTING","entryType":"ARTICLE","entryTags":{"TITLE":"Counting large numbers of events in small registers","AUTHOR":"Morris, R","JOURNAL":"Communications of the ACM","VOLUME":"21","NUMBER":"10","PAGES":"840--842","YEAR":"1978","PUBLISHER":"ACM New York, NY, USA"}},{"citationKey":"FLAJOLET1985APPROXIMATE","entryType":"ARTICLE","entryTags":{"TITLE":"Approximate counting: a detailed analysis","AUTHOR":"Flajolet, P","JOURNAL":"BIT Numerical Mathematics","VOLUME":"25","NUMBER":"1","PAGES":"113--134","YEAR":"1985","PUBLISHER":"Springer"}},{"citationKey":"ARPIT_COUNTING","entryType":"MISC","entryTags":{"TITLE":"Morris's Algorithm for Approximate Counting","AUTHOR":"Bhayani, A","URL":"https://arpitbhayani.me/blogs/morris-counter","YEAR":"2020"}},{"citationKey":"GREGGUNDERSON_COUNTING","entryType":"MISC","entryTags":{"TITLE":"Approximate Counting with Morris's Algorithm","AUTHOR":"Gundersen, G","URL":"http://gregorygundersen.com/blog/2019/11/11/morris-algorithm/","YEAR":"2019"}},{"citationKey":"3B1B_FINGER_COUNT","entryType":"MISC","entryTags":{"TITLE":"How to count to 1000 on two hands","AUTHOR":"Sanderson, G","URL":"https://youtu.be/1SMmc9gQmHQ","YEAR":"2015"}}],"gitbook":"*"},"file":{"path":"contents/convolutions/2d/2d.md","mtime":"2021-11-29T22:12:32.819Z","type":"markdown"},"gitbook":{"version":"3.6.23","time":"2021-11-29T22:13:06.944Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-api-language-selector/api-language-selector.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

