
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Iterated Function Systems Â· Arcane Algorithm Archive</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 3.6.22">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-bibtex-cite/style.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-api-language-selector/api-language-selector.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../barnsley/barnsley.html" />
    
    
    <link rel="prev" href="../domain_coloring/domain_coloring.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Algorithm Archive
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../introduction/introduction.html">
            
                <a href="../introduction/introduction.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../how_to_contribute/how_to_contribute.html">
            
                <a href="../how_to_contribute/how_to_contribute.html">
            
                    
                    How To Contribute
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../plotting/plotting.html">
            
                <a href="../plotting/plotting.html">
            
                    
                    Plotting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../domain_coloring/domain_coloring.html">
            
                <a href="../domain_coloring/domain_coloring.html">
            
                    
                    Domain Coloring
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.2" data-path="IFS.html">
            
                <a href="IFS.html">
            
                    
                    Iterated Function Systems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../barnsley/barnsley.html">
            
                <a href="../barnsley/barnsley.html">
            
                    
                    The Barnsley Fern
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../data_structures/data_structures.html">
            
                <a href="../data_structures/data_structures.html">
            
                    
                    Data Structures
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../stacks_and_queues/stacks_and_queues.html">
            
                <a href="../stacks_and_queues/stacks_and_queues.html">
            
                    
                    Stacks and Queues
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../mathematical_background/mathematical_background.html">
            
                <a href="../mathematical_background/mathematical_background.html">
            
                    
                    Mathematical Background
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../notation/notation.html">
            
                <a href="../notation/notation.html">
            
                    
                    Complexity Notation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../affine_transformations/affine_transformations.html">
            
                <a href="../affine_transformations/affine_transformations.html">
            
                    
                    Affine Transformations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../bitlogic/bitlogic.html">
            
                <a href="../bitlogic/bitlogic.html">
            
                    
                    Bit Logic
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../taylor_series_expansion/taylor_series_expansion.html">
            
                <a href="../taylor_series_expansion/taylor_series_expansion.html">
            
                    
                    Taylor Series
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../convolutions/convolutions.html">
            
                <a href="../convolutions/convolutions.html">
            
                    
                    Convolutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.5.1" data-path="../convolutions/1d/1d.html">
            
                <a href="../convolutions/1d/1d.html">
            
                    
                    Convolutions in 1D
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.2" data-path="../convolutions/multiplication/multiplication.html">
            
                <a href="../convolutions/multiplication/multiplication.html">
            
                    
                    Multiplication as a Convolution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.3" data-path="../convolutions/2d/2d.html">
            
                <a href="../convolutions/2d/2d.html">
            
                    
                    Convolutions of Images (2D)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.4" data-path="../convolutions/convolutional_theorem/convolutional_theorem.html">
            
                <a href="../convolutions/convolutional_theorem/convolutional_theorem.html">
            
                    
                    Convolutional Theorem
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../tree_traversal/tree_traversal.html">
            
                <a href="../tree_traversal/tree_traversal.html">
            
                    
                    Tree Traversal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../euclidean_algorithm/euclidean_algorithm.html">
            
                <a href="../euclidean_algorithm/euclidean_algorithm.html">
            
                    
                    Euclidean Algorithm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../monte_carlo_integration/monte_carlo_integration.html">
            
                <a href="../monte_carlo_integration/monte_carlo_integration.html">
            
                    
                    Monte Carlo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../matrix_methods/matrix_methods.html">
            
                <a href="../matrix_methods/matrix_methods.html">
            
                    
                    Matrix Methods
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../gaussian_elimination/gaussian_elimination.html">
            
                <a href="../gaussian_elimination/gaussian_elimination.html">
            
                    
                    Gaussian Elimination
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../thomas_algorithm/thomas_algorithm.html">
            
                <a href="../thomas_algorithm/thomas_algorithm.html">
            
                    
                    Thomas Algorithm
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../computational_geometry/computational_geometry.html">
            
                <a href="../computational_geometry/computational_geometry.html">
            
                    
                    Computational Geometry
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../gift_wrapping/gift_wrapping.html">
            
                <a href="../gift_wrapping/gift_wrapping.html">
            
                    
                    Gift Wrapping
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1.1" data-path="../jarvis_march/jarvis_march.html">
            
                <a href="../jarvis_march/jarvis_march.html">
            
                    
                    Jarvis March
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.2" data-path="../graham_scan/graham_scan.html">
            
                <a href="../graham_scan/graham_scan.html">
            
                    
                    Graham Scan
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../cooley_tukey/cooley_tukey.html">
            
                <a href="../cooley_tukey/cooley_tukey.html">
            
                    
                    FFT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../decision_problems/decision_problems.html">
            
                <a href="../decision_problems/decision_problems.html">
            
                    
                    Decision Problems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../stable_marriage_problem/stable_marriage_problem.html">
            
                <a href="../stable_marriage_problem/stable_marriage_problem.html">
            
                    
                    Stable Marriage Problem
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../differential_equations/differential_equations.html">
            
                <a href="../differential_equations/differential_equations.html">
            
                    
                    Differential Equation Solvers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../forward_euler_method/forward_euler_method.html">
            
                <a href="../forward_euler_method/forward_euler_method.html">
            
                    
                    Forward Euler Method
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../physics_solvers/physics_solvers.html">
            
                <a href="../physics_solvers/physics_solvers.html">
            
                    
                    Physics Solvers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../verlet_integration/verlet_integration.html">
            
                <a href="../verlet_integration/verlet_integration.html">
            
                    
                    Verlet Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="../quantum_systems/quantum_systems.html">
            
                <a href="../quantum_systems/quantum_systems.html">
            
                    
                    Quantum Systems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.2.1" data-path="../split-operator_method/split-operator_method.html">
            
                <a href="../split-operator_method/split-operator_method.html">
            
                    
                    Split-Operator Method
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../data_compression/data_compression.html">
            
                <a href="../data_compression/data_compression.html">
            
                    
                    Data Compression
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../huffman_encoding/huffman_encoding.html">
            
                <a href="../huffman_encoding/huffman_encoding.html">
            
                    
                    Huffman Encoding
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../computer_graphics/computer_graphics.html">
            
                <a href="../computer_graphics/computer_graphics.html">
            
                    
                    Computer Graphics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="../flood_fill/flood_fill.html">
            
                <a href="../flood_fill/flood_fill.html">
            
                    
                    Flood Fill
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="../quantum_information/quantum_information.html">
            
                <a href="../quantum_information/quantum_information.html">
            
                    
                    Quantum Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="../computus/computus.html">
            
                <a href="../computus/computus.html">
            
                    
                    Computus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="../approximate_counting/approximate_counting.html">
            
                <a href="../approximate_counting/approximate_counting.html">
            
                    
                    Approximate Counting Algorithm
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Iterated Function Systems</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="iterated-function-systems">Iterated Function Systems</h1>
<p>A few quick notes before we start:</p>
<ol>
<li><p>For this chapter, we will be following the methodology set by the <a href="../plotting/plotting.html">plotting chapter</a>.
That is to say that the code presented in this chapter will output another file that can be easily plotted by an external plotter.
If you like to use a plotter provided by your language of choice, please modify the code provided to do so.</p>
</li>
<li><p>This chapter is currently a subsection to the plotting chapter, but we may extend the algorithm archive in the future with other fractal generation methods, which would require creating a new section on fractals, in particular.
This would include a chapter with more rigorous definitions on fractals, which is largely missing from the following discussion.
Please let us know if you are interested!</p>
</li>
</ol>
<p>In this chapter, we will show you how to make one of the most famous fractals, the Sierpinski triangle, via Iterated Function Systems (IFSs).
We will also introduce a number of interesting concepts for further exploration, such as chaos games, Hutchinson operators, and attractors.</p>
<h2 id="the-sierpinski-triangle">The Sierpinski Triangle</h2>
<p>To begin the discussion of Iterated Function Systems (IFSs), we will first discuss what might be one of the most famous fractals currently known: the Sierpinski triangle (shown below):</p>
<p><img class="center" src="res/IFS_triangle_1.png" alt="Sierpinsky Triangle Chaos Game" style="width:100%"></p>
<p>This image is clearly a set of triangles embedded in a larger triangle in such a way that it can be continually cut into three identical pieces and still retain its internal structure.
This idea is known as self-similarity <a href="#cite-1">[1]</a>, and it is usually the first aspect of fractals to catch an audience&apos;s attention.
In fact, there are plenty of uses of fractals and their mathematical underpinnings, such as estimating the coastline of Britain <a href="#cite-2">[2]</a>, identifying fingerprints <a href="#cite-3">[3]</a>, and image compression <a href="#cite-4">[4]</a><a href="#cite-5">[5]</a>.
In many more rigorous definitions, a fractal can be described as any system that has a non-integer Hausdorff dimension <a href="#cite-6">[6]</a><a href="#cite-7">[7]</a><a href="#cite-8">[8]</a>.
Though this is an incredibly interesting concept, the discussion of this chapter will instead focus on methods to generate fractal patterns through iterated function systems.</p>
<p>To start, imagine creating a triangle from three points, <script type="math/tex; ">A</script>, <script type="math/tex; ">B</script>, and <script type="math/tex; ">C</script>.
These points can be arbitrarily chosen, but for this conversation, we will constrict them to the vertices of an equilateral triangle, as shown below:</p>
<p><img class="center" src="res/IFS_triangle_2.png" alt="Triangle Vertices" style="width:100%"></p>
<p>Now let&apos;s create three separate functions that can act on a 2-dimensional space:</p>
<p><script type="math/tex; mode=display">
\begin{align}
f_1(P) &= \frac{P + A}{2}\\
f_2(P) &= \frac{P + B}{2}\\
f_3(P) &= \frac{P + C}{2}\\
\end{align}
</script></p>
<p>Each function will read in a particular location in space (here, <script type="math/tex; ">P \in \mathbb{R}^2</script>) and output a new location that is the midpoint between the input location and <script type="math/tex; ">A</script>, <script type="math/tex; ">B</script>, or <script type="math/tex; ">C</script> for <script type="math/tex; ">f_1</script>, <script type="math/tex; ">f_2</script>, and <script type="math/tex; ">f_3</script> respectively.
The union of all of these functions (the set of all possible functions available for use) is often notated as the <em>Hutchinson operator</em> <a href="#cite-9">[9]</a><a href="#cite-10">[10]</a>, and for this case it would look like this:</p>
<p><script type="math/tex; mode=display">
H(P) = \bigcup_{i=1}^3f_i(P)
</script></p>
<p>By iteratively using this operator, we can traverse through all possible movements in the set.
For example, let&apos;s generate 3 new points that are halfway between <script type="math/tex; ">A</script> and <script type="math/tex; ">B</script>, <script type="math/tex; ">B</script> and <script type="math/tex; ">C</script>, and <script type="math/tex; ">A</script> and <script type="math/tex; ">C</script>, which will be called <script type="math/tex; ">D</script>, <script type="math/tex; ">E</script>, and <script type="math/tex; ">F</script> respectively.
This is shown below:</p>
<p><img class="center" src="res/IFS_triangle_3.png" alt="Triangle Midpoints" style="width:100%"></p>
<p>From here, each new point (<script type="math/tex; ">D</script>, <script type="math/tex; ">E</script>, and <script type="math/tex; ">F</script>) will spawn 3 children, and each child will move according to one of the three possible functions in the Hutchinson operator, as shown below:</p>
<div style="text-align:center">
<video style="width:100%" controls>
  <source src="res/IFS_triangle_vid_1.mp4" type="video/mp4">
  <img class="center" src="res/IFS_triangle_4.png" alt="First Children" style="width:100%">
</video>
</div>

<p>Here, all red children come from <script type="math/tex; ">D</script>, green children come from <script type="math/tex; ">E</script> and blue children come from <script type="math/tex; ">F</script>.
At this stage, the children will then spawn 3 more children, each of which will move according to a different function.
Those children will then spawn more children, who act accordingly.
As this process continues on and on, we begin to see an interesting pattern form:</p>
<div style="text-align:center">
<video style="width:100%" controls>
  <source src="res/IFS_triangle_vid_2.mp4" type="video/mp4">
  <img class="center" src="res/IFS_triangle_5.png" alt="Last children" style="width:100%">
</video>
</div>

<p>This is the Sierpinski triangle.
At first, it might seem like mathematical magic that a simple set of 3 functions can create such a pattern.
After all, why aren&apos;t any of the children migrating to the empty spaces in the structure?
This will require some thought, but the simplest answer is that no function within the Hutchinson operator allows for children to enter those spaces; therefore, none of the children can enter them.</p>
<h2 id="what-about-a-square">What about a square?</h2>
<p>When I learned about how the Sierpinski triangle could be generated from 3 simple functions, I began to wonder about other shapes.
Could we create fractal squares? Hexagons? Circles?
Such shapes <em>seem</em> like natural extensions to the triangular Hutchinson operator provided above, but there&apos;s a bit of a hitch...</p>
<p>First, let&apos;s take 4 points, <script type="math/tex; ">A</script>, <script type="math/tex; ">B</script>, <script type="math/tex; ">C</script>, and <script type="math/tex; ">D</script>, this time located at the four vertices of a square, like so:</p>
<p><img class="center" src="res/IFS_square_1.png" alt="Sierpinsky Triangle Chaos Game" style="width:100%"></p>
<p>In a similar fashion, we&apos;ll create 4 functions with <script type="math/tex; ">H(P) = \bigcup_{i=1}^4f_i(P)</script>, and <script type="math/tex; ">P \in \mathbb{R}^2</script> such that:</p>
<p><script type="math/tex; mode=display">
\begin{align}
f_1(P) &= \frac{P + A}{2}\\
f_2(P) &= \frac{P + B}{2}\\
f_3(P) &= \frac{P + C}{2}\\
f_4(P) &= \frac{P + D}{2}\\
\end{align}
</script></p>
<p>If we then create 5 initial points located between all the vertices and allow these points to continually spawn children like before, something peculiar happens:</p>
<div style="text-align:center">
<video style="width:100%" controls>
  <source src="res/IFS_square_vid_1.mp4" type="video/mp4">
  <img class="center" src="res/IFS_square_2.png" alt="Hutchinson square" style="width:100%">
</video>
</div>

<p>We essentially see a square of squares.
What happened to the self-similar structure we were getting before?
Why isn&apos;t this more interesting?</p>
<p>The best answer I have for now is that some Hutchinson operators are interesting and some are not.
Still, this square is a bit more interesting than it first appears, but to see why, we need to use the Hutchinson operator in a slightly different way.</p>
<h2 id="chaos-games-and-attractors">Chaos games and attractors</h2>
<p>Until now, our visualizations for both the Sierpinski triangle and the square have been computationally costly.
Every iteration, we generate 3 or 4 new children per child per step of the simulation.
This scales exponentially and means that we will quickly have millions of children to keep track of!
In fact, to deal with this, we developed our own method of counting through the tree to more efficiently keep track of everything, but that is a story for another day.</p>
<p>The question for now is whether there is a more computationally feasible way of iterating through our Hutchinson operator.</p>
<p>As it turns out, there is!
Rather than keeping track of every possible movement within the Hutchinson operator to draw out a shape, it&apos;s actually possible to randomly sample the function set instead through a process known as a <em>chaos game</em> <a href="#cite-11">[11]</a><a href="#cite-12">[12]</a>..
Here, instead of tracking children of children, we track a single individual that chooses randomly between the Hutchinson functions, as shown here:</p>
<div class="code-method"><div class="code-method-definition"></div><div class="code-method-code"><div class="code-method-sample" data-lang="jl" data-name="Julia"><pre class="language-"><code class="lang-julia"><span class="token keyword">function</span> chaos_game<span class="token punctuation">(</span>n<span class="token punctuation">::</span>Int<span class="token punctuation">,</span> shape_points<span class="token punctuation">)</span>

    <span class="token comment"># Initializing the output array and the initial point</span>
    output_points <span class="token operator">=</span> zeros<span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
    point <span class="token operator">=</span> <span class="token punctuation">[</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>n
        output_points<span class="token punctuation">[</span>i<span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token operator">=</span> point
        point <span class="token operator">=</span> <span class="token number">0.5</span><span class="token operator">*</span><span class="token punctuation">(</span>rand<span class="token punctuation">(</span>shape_points<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token operator">+</span> point<span class="token punctuation">)</span>
    <span class="token keyword">end</span>

    <span class="token keyword">return</span> output_points

<span class="token keyword">end</span>
</code></pre>
</div><div class="code-method-sample" data-lang="hs" data-name="Haskell"><pre class="language-"><code class="lang-haskell"><span class="token hvariable">chaosGame</span> <span class="token operator">::</span> <span class="token constant">RandomGen</span> <span class="token hvariable">g</span> <span class="token operator">=&gt;</span> <span class="token hvariable">g</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span> <span class="token operator">-&gt;</span> <span class="token constant">Array</span> <span class="token constant">Int</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token operator">-&gt;</span> <span class="token constant">Point</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token constant">Point</span><span class="token punctuation">]</span>
<span class="token hvariable">chaosGame</span> <span class="token hvariable">g</span> <span class="token hvariable">n</span> <span class="token hvariable">hutchinson</span> <span class="token operator">=</span> <span class="token builtin">take</span> <span class="token hvariable">n</span> <span class="token hvariable">points</span>
  <span class="token keyword">where</span>
    <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span> <span class="token hvariable">g&apos;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">random</span> <span class="token hvariable">g</span>
    <span class="token punctuation">(</span><span class="token hvariable">y</span><span class="token punctuation">,</span> <span class="token hvariable">g&apos;&apos;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">random</span> <span class="token hvariable">g&apos;</span>
    <span class="token hvariable">choices</span> <span class="token operator">=</span> <span class="token hvariable">randomRs</span> <span class="token punctuation">(</span><span class="token hvariable">bounds</span> <span class="token hvariable">hutchinson</span><span class="token punctuation">)</span> <span class="token hvariable">g&apos;&apos;</span>
    <span class="token hvariable">points</span> <span class="token operator">=</span> <span class="token constant">Point</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span> <span class="token operator">:</span> <span class="token builtin">zipWith</span> <span class="token punctuation">(</span><span class="token hvariable">hutchinson</span> <span class="token operator">!</span><span class="token punctuation">)</span> <span class="token hvariable">choices</span> <span class="token hvariable">points</span>
</code></pre>
</div><div class="code-method-sample" data-lang="cpp" data-name="C++"><pre class="language-"><code class="lang-cpp"><span class="token comment">// This is a function to simulate a &quot;chaos game&quot;</span>
PointVector <span class="token function">chaosGame</span><span class="token punctuation">(</span><span class="token keyword">int</span> numOutputPoints<span class="token punctuation">,</span> <span class="token keyword">const</span> PointVector<span class="token operator">&amp;</span> inputPoints<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Choose first point randomly</span>
  Point curPoint <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token function">drand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">drand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// For each output point, compute midpoint to random input point</span>
  PointVector <span class="token function">outputPoints</span><span class="token punctuation">(</span>numOutputPoints<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> outPoint <span class="token operator">:</span> outputPoints<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    outPoint <span class="token operator">=</span> curPoint<span class="token punctuation">;</span>
    curPoint <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>curPoint <span class="token operator">+</span> <span class="token function">choose</span><span class="token punctuation">(</span>inputPoints<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> outputPoints<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="py" data-name="Python"><pre class="language-"><code class="lang-python"><span class="token keyword">def</span> <span class="token function">chaos_game</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> shape_points<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># Initialize the starting point</span>
    point <span class="token operator">=</span> <span class="token punctuation">[</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> random<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Update the point position and yield the result</span>
        point <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>p <span class="token operator">+</span> s<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token keyword">for</span> p<span class="token punctuation">,</span> s <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>point<span class="token punctuation">,</span> choice<span class="token punctuation">(</span>shape_points<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">yield</span> point
</code></pre>
</div><div class="code-method-sample" data-lang="c" data-name="C"><pre class="language-"><code class="lang-c"><span class="token keyword">void</span> <span class="token function">chaos_game</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">point</span> <span class="token operator">*</span>in<span class="token punctuation">,</span> <span class="token class-name">size_t</span> in_n<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">point</span> <span class="token operator">*</span>out<span class="token punctuation">,</span>
                <span class="token class-name">size_t</span> out_n<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">struct</span> <span class="token class-name">point</span> cur_point <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token function">drand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">drand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> out_n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        out<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> cur_point<span class="token punctuation">;</span>
        <span class="token keyword">struct</span> <span class="token class-name">point</span> tmp <span class="token operator">=</span> <span class="token function">random_element</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span> in_n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cur_point<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>cur_point<span class="token punctuation">.</span>x <span class="token operator">+</span> tmp<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cur_point<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>cur_point<span class="token punctuation">.</span>y <span class="token operator">+</span> tmp<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="lisp" data-name="Common Lisp"><pre class="language-"><code class="lang-lisp"><span class="token punctuation">(</span><span class="token defun"><span class="token keyword">defun</span> <span class="token function">chaos-game</span> <span class="token punctuation">(</span><span class="token arguments"><span class="token argument variable">iterations</span> <span class="token argument variable">shape-points</span></span><span class="token punctuation">)</span></span>
  <span class="token string">&quot;Plays a chaos game with a certain shape for a determined amount of iterations&quot;</span>
  <span class="token punctuation">(</span><span class="token car">loop</span>
    repeat iterations
    for rand-point = <span class="token punctuation">(</span><span class="token car">svref</span> shape-points <span class="token punctuation">(</span><span class="token car">random</span> <span class="token punctuation">(</span><span class="token car">length</span> shape-points<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    for point = <span class="token punctuation">(</span><span class="token car">make-point</span> <span class="token punctuation">(</span><span class="token car">random</span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">random</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">; starting point</span>
    then <span class="token punctuation">(</span><span class="token car">make-point</span>
           <span class="token punctuation">(</span><span class="token car">*</span> <span class="token number">0.5</span> <span class="token punctuation">(</span><span class="token car">+</span> <span class="token punctuation">(</span><span class="token car">point-x</span> rand-point<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">point-x</span> point<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
           <span class="token punctuation">(</span><span class="token car">*</span> <span class="token number">0.5</span> <span class="token punctuation">(</span><span class="token car">+</span> <span class="token punctuation">(</span><span class="token car">point-y</span> rand-point<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">point-y</span> point<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">; every subsequent point</span>
    collect point<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="coco" data-name="Coconut"><pre class="language-"><code class="lang-coconut">data point(x=0, y=0):
    def __add__(self, other):
        return point(self.x + other.x, self.y + other.y)

    def __rmul__(self, other):
        return point(self.x * other, self.y * other)

def chaos_game(n, shape_points):
    p = point(random(), random())

    for _ in range(n):
        p = (1/2) * (p + choice(shape_points))
        yield p
</code></pre>
</div><div class="code-method-sample" data-lang="java" data-name="Java"><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Point</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">chaosGame</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token class-name">Point</span><span class="token punctuation">[</span><span class="token punctuation">]</span> shapePoints<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Random</span> rng <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Initialize output vector</span>
    <span class="token class-name">Point</span><span class="token punctuation">[</span><span class="token punctuation">]</span> outputPoints <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// Choose first point randomly</span>
    <span class="token class-name">Point</span> point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>rng<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rng<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        outputPoints<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> point<span class="token punctuation">;</span>

        <span class="token comment">// Clone point to get a new reference</span>
        point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>point<span class="token punctuation">.</span>x<span class="token punctuation">,</span> point<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Retrieve random shape point</span>
        <span class="token class-name">Point</span> temp <span class="token operator">=</span> shapePoints<span class="token punctuation">[</span>rng<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>shapePoints<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// Calculate midpoint</span>
        point<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>point<span class="token punctuation">.</span>x <span class="token operator">+</span> temp<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        point<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>point<span class="token punctuation">.</span>y <span class="token operator">+</span> temp<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> outputPoints<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div></div></div>

<p>If we set the initial point to the on the equilateral triangle we saw before, we can see the Sierpinski triangle again after a few thousand iterations, as shown below:</p>
<div style="text-align:center">
<video style="width:100%" controls>
  <source src="res/chaos_vid_1.mp4" type="video/mp4">
  <img class="center" src="res/chaos_1.png" alt="Chaos game" style="width:100%">
</video>
</div>

<p>Here, we are plotting 200,000 point locations in sets of 1000, and every set becomes successively more blue as the visualization continues.
At first glance, this visualization seems bewildering.
After all, it appears as if the entire triangle just magically comes into view in a few seconds.
The important thing to remember here is that each of these 200,000 dots is another location that our initial point decided to visit.</p>
<p>That said, there is something peculiar about the way the chaos game starts.
We are actually allowed to start the simulation <em>off</em> of the Sierpinski triangle.
As we mentioned earlier, none of the functions for the Sierpinski visualization allow children to enter the empty spaces of the triangle, so let&apos;s see what happens if we start the point off at the center of the triangle:</p>
<div style="text-align:center">
<video style="width:100%" controls>
  <source src="res/chaos_vid_2.mp4" type="video/mp4">
  <img class="center" src="reschaos_2.png" alt="Chaos game with initial points" style="width:100%">
</video>
</div>

<p>Here, I have plotted the first 20 steps of the chaos game, and it is clear that the point gets closer and closer to the triangle each iteration.
Once it lands on the triangle, it can no longer escape and every movement from then on will be on the triangle.</p>
<p>In a sense, the wanderin point is <em>attracted</em> to the Sierpinski triangle with this set of functions, and that is actually the case!
The truth is that the word <em>attractor</em> is a very loaded term in the literature, but for the purposes of our discussion here, an <em>attractor</em> is any shape defined by the iteration through Hutchinson operator functions.</p>
<p>So let&apos;s go back to the example with the 4 points along the square and generate the attractor via a chaos game instead of going through every branch of the Hutchinson operator.
If we do this, we get what seems to be a random distribution of points:</p>
<p><img class="center" src="res/IFS_square_3.png" alt="Hutchinson square" style="width:100%"></p>
<p>This kinda boggled my mind a bit when I looked at it for the first time.
What does a random distribution of points mean in this context?</p>
<p>Well, firstly, it&apos;s only a random distribution between the square vertices of <script type="math/tex; ">A</script>, <script type="math/tex; ">B</script>, <script type="math/tex; ">C</script>, and <script type="math/tex; ">D</script>, but nothing exists outside of these points.
This means that it&apos;s not actually a random distribution of points, but instead an attractive plane that our lone wandering point can exist happily within.</p>
<p>This really helped me understand how attractors present themselves in different dimensions.
The Sierpinski triangle seems like a series of lines (one-dimensional objects) in two-dimensional space, but the square is a truly two-dimensional object.
In general, this means that an attractor embedded within <script type="math/tex; ">\mathbb{R}^N</script> can be any shape of dimension N or lower.</p>
<p>The next obvious question is whether a square can create any more interesting fractally patterns, and the answer is &quot;yes, but only if we restrict the movement a bit.&quot;
Which brings us to another topic entirely: restricted chaos games.
Discussing restricted chaos games in more detail is a chapter in its own right, so I will forego the discussion here.
If you are interested, please let me know and I will be more than willing to add the chapter in the future!</p>
<h2 id="video-explanation">Video Explanation</h2>
<p>Here is a video describing iterated function systems:</p>
<div style="text-align:center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/nIIp-vo8rHg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; pic
ture-in-picture" allowfullscreen></iframe>
</div>

<h2 id="example-code">Example Code</h2>
<p>For the code in this chapter, we have decided to write it specifically for the Chaos game, not the hutchinson animations shown at the start of the chapter.
This is because that animation is slightly tricky to create and distracts from the overall purpose of this chapter.
In addition, we have written the chaos game code to take in a set of points so that it is not hard-coded for the Sierpinski triangle and can be easily extended to other shapes like the square or restricted chaos games, as we mentioned before!</p>
<div class="code-method"><div class="code-method-definition"></div><div class="code-method-code"><div class="code-method-sample" data-lang="jl" data-name="Julia"><pre class="language-"><code class="lang-julia"><span class="token keyword">using</span> DelimitedFiles

<span class="token comment"># This is a function to simulate a &quot;chaos game&quot;</span>
<span class="token keyword">function</span> chaos_game<span class="token punctuation">(</span>n<span class="token punctuation">::</span>Int<span class="token punctuation">,</span> shape_points<span class="token punctuation">)</span>

    <span class="token comment"># Initializing the output array and the initial point</span>
    output_points <span class="token operator">=</span> zeros<span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
    point <span class="token operator">=</span> <span class="token punctuation">[</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>n
        output_points<span class="token punctuation">[</span>i<span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token operator">=</span> point
        point <span class="token operator">=</span> <span class="token number">0.5</span><span class="token operator">*</span><span class="token punctuation">(</span>rand<span class="token punctuation">(</span>shape_points<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token operator">+</span> point<span class="token punctuation">)</span>
    <span class="token keyword">end</span>

    <span class="token keyword">return</span> output_points

<span class="token keyword">end</span>

<span class="token comment"># This will generate a Sierpinski triangle with a chaos game of n points for an </span>
<span class="token comment"># initial triangle with three points on the vertices of an equilateral triangle:</span>
<span class="token comment">#     A = (0.0, 0.0)</span>
<span class="token comment">#     B = (0.5, sqrt(0.75))</span>
<span class="token comment">#     C = (1.0, 0.0)</span>
<span class="token comment"># It will output the file sierpinski.dat, which can be plotted after</span>
shape_points <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> sqrt<span class="token punctuation">(</span><span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
output_points <span class="token operator">=</span> chaos_game<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> shape_points<span class="token punctuation">)</span>
writedlm<span class="token punctuation">(</span><span class="token string">&quot;sierpinski.dat&quot;</span><span class="token punctuation">,</span> output_points<span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="hs" data-name="Haskell"><pre class="language-"><code class="lang-haskell"><span class="token import-statement"><span class="token keyword">import</span> Data<span class="token punctuation">.</span>Array</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">Array</span><span class="token punctuation">,</span> <span class="token hvariable">bounds</span><span class="token punctuation">,</span> <span class="token hvariable">listArray</span><span class="token punctuation">)</span>
<span class="token import-statement"><span class="token keyword">import</span> Data<span class="token punctuation">.</span>List</span> <span class="token punctuation">(</span><span class="token hvariable">intercalate</span><span class="token punctuation">)</span>
<span class="token import-statement"><span class="token keyword">import</span> System<span class="token punctuation">.</span>Random</span>

<span class="token keyword">data</span> <span class="token constant">Point</span> <span class="token operator">=</span> <span class="token constant">Point</span> <span class="token constant">Double</span> <span class="token constant">Double</span>

<span class="token hvariable">chaosGame</span> <span class="token operator">::</span> <span class="token constant">RandomGen</span> <span class="token hvariable">g</span> <span class="token operator">=&gt;</span> <span class="token hvariable">g</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span> <span class="token operator">-&gt;</span> <span class="token constant">Array</span> <span class="token constant">Int</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token operator">-&gt;</span> <span class="token constant">Point</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token constant">Point</span><span class="token punctuation">]</span>
<span class="token hvariable">chaosGame</span> <span class="token hvariable">g</span> <span class="token hvariable">n</span> <span class="token hvariable">hutchinson</span> <span class="token operator">=</span> <span class="token builtin">take</span> <span class="token hvariable">n</span> <span class="token hvariable">points</span>
  <span class="token keyword">where</span>
    <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span> <span class="token hvariable">g&apos;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">random</span> <span class="token hvariable">g</span>
    <span class="token punctuation">(</span><span class="token hvariable">y</span><span class="token punctuation">,</span> <span class="token hvariable">g&apos;&apos;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">random</span> <span class="token hvariable">g&apos;</span>
    <span class="token hvariable">choices</span> <span class="token operator">=</span> <span class="token hvariable">randomRs</span> <span class="token punctuation">(</span><span class="token hvariable">bounds</span> <span class="token hvariable">hutchinson</span><span class="token punctuation">)</span> <span class="token hvariable">g&apos;&apos;</span>
    <span class="token hvariable">points</span> <span class="token operator">=</span> <span class="token constant">Point</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span> <span class="token operator">:</span> <span class="token builtin">zipWith</span> <span class="token punctuation">(</span><span class="token hvariable">hutchinson</span> <span class="token operator">!</span><span class="token punctuation">)</span> <span class="token hvariable">choices</span> <span class="token hvariable">points</span>

<span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token hvariable">g</span> <span class="token operator">&lt;-</span> <span class="token hvariable">newStdGen</span>

  <span class="token keyword">let</span> <span class="token hvariable">midPoint</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">Point</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">+</span> <span class="token hvariable">x</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token hvariable">b</span> <span class="token operator">+</span> <span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token hvariable">sierpinski</span> <span class="token operator">=</span>
        <span class="token hvariable">listArray</span>
          <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
          <span class="token punctuation">[</span> <span class="token hvariable">midPoint</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token hvariable">midPoint</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token number">0.5</span> <span class="token punctuation">(</span><span class="token builtin">sqrt</span> <span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token hvariable">midPoint</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token number">1</span> <span class="token number">0</span><span class="token punctuation">)</span>
          <span class="token punctuation">]</span>
      <span class="token hvariable">points</span> <span class="token operator">=</span> <span class="token hvariable">chaosGame</span> <span class="token hvariable">g</span> <span class="token number">10000</span> <span class="token hvariable">sierpinski</span>
      <span class="token hvariable">showPoint</span> <span class="token punctuation">(</span><span class="token constant">Point</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token builtin">show</span> <span class="token hvariable">x</span> <span class="token operator">++</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">y</span>

  <span class="token builtin">writeFile</span> <span class="token string">&quot;out.dat&quot;</span> <span class="token operator">$</span> <span class="token hvariable">intercalate</span> <span class="token string">&quot;\n&quot;</span> <span class="token operator">$</span> <span class="token builtin">map</span> <span class="token hvariable">showPoint</span> <span class="token hvariable">points</span>
</code></pre>
</div><div class="code-method-sample" data-lang="cpp" data-name="C++"><pre class="language-"><code class="lang-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cmath&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;random&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token comment">// Simple X-Y point structure, along with some operators</span>
<span class="token keyword">struct</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
  <span class="token keyword">double</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Point <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span>Point lhs<span class="token punctuation">,</span> Point rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span>lhs<span class="token punctuation">.</span>x <span class="token operator">+</span> rhs<span class="token punctuation">.</span>x<span class="token punctuation">,</span> lhs<span class="token punctuation">.</span>y <span class="token operator">+</span> rhs<span class="token punctuation">.</span>y<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
Point <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">double</span> k<span class="token punctuation">,</span> Point pt<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span>k <span class="token operator">*</span> pt<span class="token punctuation">.</span>x<span class="token punctuation">,</span> k <span class="token operator">*</span> pt<span class="token punctuation">.</span>y<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
Point <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span>Point pt<span class="token punctuation">,</span> <span class="token keyword">double</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> k <span class="token operator">*</span> pt<span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">using</span> PointVector <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>Point<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// Returns a pseudo-random number generator</span>
std<span class="token double-colon punctuation">::</span>default_random_engine<span class="token operator">&amp;</span> <span class="token function">rng</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Initialize static pseudo-random engine with non-deterministic random seed</span>
  <span class="token keyword">static</span> std<span class="token double-colon punctuation">::</span>default_random_engine <span class="token function">randEngine</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>random_device<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> randEngine<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Returns a random double in [0, 1)</span>
<span class="token keyword">double</span> <span class="token function">drand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">uniform_real_distribution</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">rng</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Returns a random integer in [0, numElems-1]</span>
std<span class="token double-colon punctuation">::</span>size_t <span class="token function">randrange</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>size_t numElems<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">uniform_int_distribution</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>size_t<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> numElems <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">rng</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Return a random point from the non-empty PointVector</span>
Point <span class="token function">choose</span><span class="token punctuation">(</span><span class="token keyword">const</span> PointVector<span class="token operator">&amp;</span> points<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> points<span class="token punctuation">[</span><span class="token function">randrange</span><span class="token punctuation">(</span>points<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// This is a function to simulate a &quot;chaos game&quot;</span>
PointVector <span class="token function">chaosGame</span><span class="token punctuation">(</span><span class="token keyword">int</span> numOutputPoints<span class="token punctuation">,</span> <span class="token keyword">const</span> PointVector<span class="token operator">&amp;</span> inputPoints<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Choose first point randomly</span>
  Point curPoint <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token function">drand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">drand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// For each output point, compute midpoint to random input point</span>
  PointVector <span class="token function">outputPoints</span><span class="token punctuation">(</span>numOutputPoints<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> outPoint <span class="token operator">:</span> outputPoints<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    outPoint <span class="token operator">=</span> curPoint<span class="token punctuation">;</span>
    curPoint <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>curPoint <span class="token operator">+</span> <span class="token function">choose</span><span class="token punctuation">(</span>inputPoints<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> outputPoints<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// This will generate a Sierpinski triangle with a chaos game of n points for</span>
  <span class="token comment">// an initial triangle with three points on the vertices of an equilateral</span>
  <span class="token comment">// triangle.</span>
  PointVector inputPoints <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">0.5</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">auto</span> outputPoints <span class="token operator">=</span> <span class="token function">chaosGame</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> inputPoints<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// It will output the file sierpinski.dat, which can be plotted after</span>
  std<span class="token double-colon punctuation">::</span>ofstream <span class="token function">ofs</span><span class="token punctuation">(</span><span class="token string">&quot;sierpinski.dat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> pt <span class="token operator">:</span> outputPoints<span class="token punctuation">)</span>
    ofs <span class="token operator">&lt;&lt;</span> pt<span class="token punctuation">.</span>x <span class="token operator">&lt;&lt;</span> <span class="token string">&apos;\t&apos;</span> <span class="token operator">&lt;&lt;</span> pt<span class="token punctuation">.</span>y <span class="token operator">&lt;&lt;</span> <span class="token string">&apos;\n&apos;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="py" data-name="Python"><pre class="language-"><code class="lang-python"><span class="token keyword">from</span> random <span class="token keyword">import</span> random<span class="token punctuation">,</span> choice
<span class="token keyword">from</span> math <span class="token keyword">import</span> sqrt

<span class="token comment"># This generator simulates a &quot;chaos game&quot;</span>
<span class="token keyword">def</span> <span class="token function">chaos_game</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> shape_points<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># Initialize the starting point</span>
    point <span class="token operator">=</span> <span class="token punctuation">[</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> random<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Update the point position and yield the result</span>
        point <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>p <span class="token operator">+</span> s<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token keyword">for</span> p<span class="token punctuation">,</span> s <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>point<span class="token punctuation">,</span> choice<span class="token punctuation">(</span>shape_points<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">yield</span> point

<span class="token comment"># This will generate a Sierpinski triangle with a chaos game of n points for an</span>
<span class="token comment"># initial triangle with three points on the vertices of an equilateral triangle:</span>
<span class="token comment">#     A = (0.0, 0.0)</span>
<span class="token comment">#     B = (0.5, sqrt(0.75))</span>
<span class="token comment">#     C = (1.0, 0.0)</span>
<span class="token comment"># It will output the file sierpinski.dat, which can be plotted after</span>
shape_points <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> sqrt<span class="token punctuation">(</span><span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;sierpinski.dat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;w&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    <span class="token keyword">for</span> point <span class="token keyword">in</span> chaos_game<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> shape_points<span class="token punctuation">)</span><span class="token punctuation">:</span>
        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">&quot;{0}\t{1}\n&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token operator">*</span>point<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="c" data-name="C"><pre class="language-"><code class="lang-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;math.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span>

<span class="token keyword">struct</span> <span class="token class-name">point</span> <span class="token punctuation">{</span>
    <span class="token keyword">double</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">double</span> <span class="token function">drand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>RAND_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">point</span> <span class="token function">random_element</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">point</span> <span class="token operator">*</span>array<span class="token punctuation">,</span> <span class="token class-name">size_t</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> array<span class="token punctuation">[</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">chaos_game</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">point</span> <span class="token operator">*</span>in<span class="token punctuation">,</span> <span class="token class-name">size_t</span> in_n<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">point</span> <span class="token operator">*</span>out<span class="token punctuation">,</span>
                <span class="token class-name">size_t</span> out_n<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">struct</span> <span class="token class-name">point</span> cur_point <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token function">drand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">drand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> out_n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        out<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> cur_point<span class="token punctuation">;</span>
        <span class="token keyword">struct</span> <span class="token class-name">point</span> tmp <span class="token operator">=</span> <span class="token function">random_element</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span> in_n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cur_point<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>cur_point<span class="token punctuation">.</span>x <span class="token operator">+</span> tmp<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cur_point<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>cur_point<span class="token punctuation">.</span>y <span class="token operator">+</span> tmp<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">struct</span> <span class="token class-name">point</span> shape_points <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token number">0.0</span><span class="token punctuation">,</span><span class="token number">0.0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">1.0</span><span class="token punctuation">,</span><span class="token number">0.0</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">point</span> out_points<span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token function">srand</span><span class="token punctuation">(</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">chaos_game</span><span class="token punctuation">(</span>shape_points<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> out_points<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    FILE <span class="token operator">*</span>fp <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">&quot;sierpinksi.dat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;w+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fprintf</span><span class="token punctuation">(</span>fp<span class="token punctuation">,</span> <span class="token string">&quot;%f\t%f\n&quot;</span><span class="token punctuation">,</span> out_points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> out_points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="lisp" data-name="Common Lisp"><pre class="language-"><code class="lang-lisp"><span class="token heading comment title">;;;; Iterated Function System implementation</span>

<span class="token punctuation">(</span><span class="token car">defstruct</span> <span class="token punctuation">(</span><span class="token car">point</span> <span class="token punctuation">(</span><span class="token lisp-property property">:constructor</span> make-point <span class="token punctuation">(</span><span class="token car">x</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> x y<span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token defun"><span class="token keyword">defun</span> <span class="token function">chaos-game</span> <span class="token punctuation">(</span><span class="token arguments"><span class="token argument variable">iterations</span> <span class="token argument variable">shape-points</span></span><span class="token punctuation">)</span></span>
  <span class="token string">&quot;Plays a chaos game with a certain shape for a determined amount of iterations&quot;</span>
  <span class="token punctuation">(</span><span class="token car">loop</span>
    repeat iterations
    for rand-point = <span class="token punctuation">(</span><span class="token car">svref</span> shape-points <span class="token punctuation">(</span><span class="token car">random</span> <span class="token punctuation">(</span><span class="token car">length</span> shape-points<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    for point = <span class="token punctuation">(</span><span class="token car">make-point</span> <span class="token punctuation">(</span><span class="token car">random</span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">random</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">; starting point</span>
    then <span class="token punctuation">(</span><span class="token car">make-point</span>
           <span class="token punctuation">(</span><span class="token car">*</span> <span class="token number">0.5</span> <span class="token punctuation">(</span><span class="token car">+</span> <span class="token punctuation">(</span><span class="token car">point-x</span> rand-point<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">point-x</span> point<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
           <span class="token punctuation">(</span><span class="token car">*</span> <span class="token number">0.5</span> <span class="token punctuation">(</span><span class="token car">+</span> <span class="token punctuation">(</span><span class="token car">point-y</span> rand-point<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">point-y</span> point<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">; every subsequent point</span>
    collect point<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token car">defparameter</span> *shape-points*
  <span class="token punctuation">(</span><span class="token car">map</span>
    <span class="token quoted-symbol variable symbol">&apos;vector</span>
    <span class="token punctuation">(</span><span class="token lambda"><span class="token keyword">lambda</span> <span class="token punctuation">(</span><span class="token arguments"><span class="token argument variable">e</span></span><span class="token punctuation">)</span></span> <span class="token punctuation">(</span><span class="token car">apply</span> <span class="token quoted-symbol variable symbol">#&apos;make-point</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">;; the backquote allows us to selectively evaluate (sqrt 0.75) with the comma</span>
    <span class="token punctuation">`(</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">0.5</span> <span class="token punctuation">,(</span><span class="token car">sqrt</span> <span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">;; output the data to the &quot;out.dat&quot; file</span>
<span class="token punctuation">(</span><span class="token car">with-open-file</span> <span class="token punctuation">(</span><span class="token car">out</span> <span class="token string">&quot;out.dat&quot;</span> <span class="token lisp-property property">:direction</span> <span class="token lisp-property property">:output</span> <span class="token lisp-property property">:if-exists</span> <span class="token lisp-property property">:supersede</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token car">flet</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token car">format-point</span> <span class="token punctuation">(</span><span class="token car">p</span><span class="token punctuation">)</span>
           <span class="token comment">;; this is not very clean, but it&apos;s the simplest way to insert a tab into a string.</span>
           <span class="token punctuation">(</span><span class="token car">format</span> <span class="token boolean">nil</span> <span class="token string">&quot;~f~c~f&quot;</span> <span class="token punctuation">(</span><span class="token car">point-x</span> p<span class="token punctuation">)</span> #\tab <span class="token punctuation">(</span><span class="token car">point-y</span> p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token car">format</span> out <span class="token string">&quot;~{~a~%~}&quot;</span> <span class="token punctuation">(</span><span class="token car">map</span> <span class="token quoted-symbol variable symbol">&apos;list</span> <span class="token quoted-symbol variable symbol">#&apos;format-point</span> <span class="token punctuation">(</span><span class="token car">chaos-game</span> <span class="token number">10000</span> *shape-points*<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="coco" data-name="Coconut"><pre class="language-"><code class="lang-coconut">from math import sqrt
from random import random, choice

data point(x=0, y=0):
    def __add__(self, other):
        return point(self.x + other.x, self.y + other.y)

    def __rmul__(self, other):
        return point(self.x * other, self.y * other)

def chaos_game(n, shape_points):
    p = point(random(), random())

    for _ in range(n):
        p = (1/2) * (p + choice(shape_points))
        yield p


# This will generate a Sierpinski triangle with a chaos game of n points for an
# initial triangle with three points on the vertices of an equilateral triangle:
#     A = (0.0, 0.0)
#     B = (0.5, sqrt(0.75))
#     C = (1.0, 0.0)
# It will output the file sierpinski.dat, which can be plotted after
shape_points = [point(0.0, 0.0),
                point(0.5, sqrt(0.75)),
                point(1.0, 0.0)]
with open(&quot;sierpinski.dat&quot;, &quot;w&quot;) as f:
    for p in chaos_game(10000, shape_points):
        f.write(&quot;{0}\t{1}\n&quot;.format(p.x, p.y))
</code></pre>
</div><div class="code-method-sample" data-lang="java" data-name="Java"><pre class="language-"><code class="lang-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileWriter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Random</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> IFS <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
        <span class="token keyword">double</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// This is a function to simulate a &quot;chaos game&quot;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Point</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">chaosGame</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token class-name">Point</span><span class="token punctuation">[</span><span class="token punctuation">]</span> shapePoints<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Random</span> rng <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Initialize output vector</span>
        <span class="token class-name">Point</span><span class="token punctuation">[</span><span class="token punctuation">]</span> outputPoints <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token comment">// Choose first point randomly</span>
        <span class="token class-name">Point</span> point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>rng<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rng<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            outputPoints<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> point<span class="token punctuation">;</span>

            <span class="token comment">// Clone point to get a new reference</span>
            point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>point<span class="token punctuation">.</span>x<span class="token punctuation">,</span> point<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Retrieve random shape point</span>
            <span class="token class-name">Point</span> temp <span class="token operator">=</span> shapePoints<span class="token punctuation">[</span>rng<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>shapePoints<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">// Calculate midpoint</span>
            point<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>point<span class="token punctuation">.</span>x <span class="token operator">+</span> temp<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
            point<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>point<span class="token punctuation">.</span>y <span class="token operator">+</span> temp<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> outputPoints<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// This will generate a Sierpinski triangle with a chaos game of n points for an</span>
        <span class="token comment">// initial triangle with three points on the vertices of an equilateral triangle:</span>
        <span class="token comment">//     A = (0.0, 0.0)</span>
        <span class="token comment">//     B = (0.5, sqrt(0.75))</span>
        <span class="token comment">//     C = (1.0, 0.0)</span>
        <span class="token comment">// It will output the file sierpinski.dat, which can be plotted after</span>
        <span class="token class-name">Point</span><span class="token punctuation">[</span><span class="token punctuation">]</span> shapePoints <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
                <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">Point</span><span class="token punctuation">[</span><span class="token punctuation">]</span> outputPoints <span class="token operator">=</span> <span class="token function">chaosGame</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> shapePoints<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">&quot;sierpinski.dat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Point</span> p <span class="token operator">:</span> outputPoints<span class="token punctuation">)</span>
            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
</div></div></div>

<h3 id="bibliography">Bibliography</h3>
<p><div class="references"><div class="citation"><div class="citation-number" id="cite-1">1.</div><div class="citation-text"><a href="https://en.wikipedia.org/wiki/Self-similarity" target="_blank">Wikipedia: Self-similarity</a>, 2019.</div></div><div class="citation"><div class="citation-number" id="cite-2">2.</div><div class="citation-text">Mandelbrot, Benoit, How long is the coast of Britain? Statistical self-similarity and fractional dimension, <i>American Association for the Advancement of Science</i>, 1967.</div></div><div class="citation"><div class="citation-number" id="cite-3">3.</div><div class="citation-text">Jampour, Mahdi  <i>et al.</i>, A new fast technique for fingerprint identification with fractal and chaos game theory, <i>World Scientific</i>, 2010.</div></div><div class="citation"><div class="citation-number" id="cite-4">4.</div><div class="citation-text"><a href="https://en.wikipedia.org/wiki/Fractal_compression" target="_blank">Wikipedia: Fractal Compression</a>, 2019.</div></div><div class="citation"><div class="citation-number" id="cite-5">5.</div><div class="citation-text">Saupe, Dietmar and Hamzaoui, Raouf, A review of the fractal image compression literature, <i>ACM</i>, 1994.</div></div><div class="citation"><div class="citation-number" id="cite-6">6.</div><div class="citation-text">Sanderson, G, <a href="https://www.youtube.com/watch?v=gB9n2gHsHN4" target="_blank">3blue1brown: Fractals are typically not self-similar</a>, 2017.</div></div><div class="citation"><div class="citation-number" id="cite-7">7.</div><div class="citation-text"><a href="https://en.wikipedia.org/wiki/Hausdorff_dimension" target="_blank">Wikipedia: Hausdorff dimension</a>, 2019.</div></div><div class="citation"><div class="citation-number" id="cite-8">8.</div><div class="citation-text">Gneiting, Tilmann and Å evÄÃ­kovÃ¡, Hana and Percival, Donald B, Estimators of fractal dimension: Assessing the roughness of time series and spatial data, <i>JSTOR</i>, 2012.</div></div><div class="citation"><div class="citation-number" id="cite-9">9.</div><div class="citation-text"><a href="https://en.wikipedia.org/wiki/Hutchinson_operator" target="_blank">Wikipedia: Hutchinson Operator</a>, 2019.</div></div><div class="citation"><div class="citation-number" id="cite-10">10.</div><div class="citation-text">Hutchinson, John E, Fractals and self similarity, <i>JSTOR</i>, 1981.</div></div><div class="citation"><div class="citation-number" id="cite-11">11.</div><div class="citation-text"><a href="https://en.wikipedia.org/wiki/Chaos_game" target="_blank">Wikipedia: Chaos Game</a>, 2019.</div></div><div class="citation"><div class="citation-number" id="cite-12">12.</div><div class="citation-text"><a href="http://mathworld.wolfram.com/ChaosGame.html" target="_blank">Wolfram: Chaos Game</a>, 2019.</div></div></div></p>
<script>
MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
</script>

<h2 id="license">License</h2>
<h5 id="code-examples">Code Examples</h5>
<p>The code examples are licensed under the MIT license (found in <a href="https://github.com/algorithm-archivists/algorithm-archive/blob/master/LICENSE.md" target="_blank">LICENSE.md</a>).</p>
<h5 id="text">Text</h5>
<p>The text of this chapter was written by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
<p><a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank"><p><img class="center" src="../cc/CC-BY-SA_icon.svg"></p></a></p>
<h4 id="imagesgraphics">Images/Graphics</h4>
<ul>
<li>The image &quot;<a href="res/IFS_triangle_1.png">IFS triangle 1</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The image &quot;<a href="res/IFS_triangle_2.png">IFS triangle 2</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The image &quot;<a href="res/IFS_triangle_3.png">IFS triangle 3</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The image &quot;<a href="res/IFS_triangle_4.png">IFS triangle 4</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The image &quot;<a href="res/IFS_triangle_5.png">IFS triangle 5</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The image &quot;<a href="res/IFS_square_1.png">IFS square 1</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The image &quot;<a href="res/IFS_square_2.png">IFS square 2</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The image &quot;<a href="res/IFS_square_3.png">IFS square 3</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The image &quot;<a href="res/chaos_1.png">Chaos 1</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The image &quot;<a href="res/chaos_2.png">Chaos 2</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The video &quot;<a href="res/IFS_triangle_vid_1.mp4">IFS triangle video 1</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The video &quot;<a href="res/IFS_triangle_vid_2.mp4">IFS triangle video 2</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The video &quot;<a href="res/IFS_square_vid_1.mp4">IFS square video 1</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The video &quot;<a href="res/chaos_vid_1.mp4">Chaos video 1</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The video &quot;<a href="res/chaos_vid_2.mp4">Chaos video 2</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../domain_coloring/domain_coloring.html" class="navigation navigation-prev " aria-label="Previous page: Domain Coloring">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../barnsley/barnsley.html" class="navigation navigation-next " aria-label="Next page: The Barnsley Fern">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Iterated Function Systems","level":"1.4.2","depth":2,"next":{"title":"The Barnsley Fern","level":"1.4.2.1","depth":3,"path":"contents/barnsley/barnsley.md","ref":"contents/barnsley/barnsley.md","articles":[]},"previous":{"title":"Domain Coloring","level":"1.4.1","depth":2,"path":"contents/domain_coloring/domain_coloring.md","ref":"contents/domain_coloring/domain_coloring.md","articles":[]},"dir":"ltr"},"config":{"plugins":["mathjax@https://github.com/algorithm-archivists/plugin-mathjax","bibtex-cite","wordcount","api-language-selector@https://github.com/algorithm-archivists/gitbook-plugin-api-language-selector.git","include-codeblock","bulk-redirect","prism","-highlight"],"root":"./","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"api-language-selector":{"languages":[{"lang":"jl","name":"Julia","default":true},{"lang":"bash","name":"Bash"},{"lang":"cs","name":"C#"},{"lang":"cpp","name":"C++"},{"lang":"c","name":"C"},{"lang":"c8","name":"chip-8"},{"lang":"py","name":"Python"},{"lang":"js","name":"JavaScript"},{"lang":"scratch","name":"Scratch"},{"lang":"hs","name":"Haskell"},{"lang":"rs","name":"Rust"},{"lang":"ml","name":"OCaml"},{"lang":"java","name":"Java"},{"lang":"clj","name":"Clojure"},{"lang":"elm","name":"Elm"},{"lang":"LabVIEW","name":"LabVIEW"},{"lang":"d","name":"D"},{"lang":"go","name":"Go"},{"lang":"swift","name":"Swift"},{"lang":"racket","name":"Racket"},{"lang":"m","name":"Matlab"},{"lang":"r","name":"R"},{"lang":"ti83b","name":"TI-83 Basic"},{"lang":"lua","name":"Lua"},{"lang":"crystal","name":"Crystal"},{"lang":"php","name":"PHP"},{"lang":"lisp","name":"Common Lisp"},{"lang":"nim","name":"Nim"},{"lang":"asm-x64","name":"X86-64 Assembly"},{"lang":"f90","name":"Fortran90"},{"lang":"factor","name":"Factor"},{"lang":"ws","name":"Whitespace"},{"lang":"scala","name":"Scala"},{"lang":"emojic","name":"Emojicode"},{"lang":"lolcode","name":"LOLCODE"},{"lang":"piet","name":"Piet"},{"lang":"ss","name":"Scheme"},{"lang":"ps1","name":"PowerShell"},{"lang":"v","name":"Vlang"},{"lang":"coffee","name":"CoffeeScript"},{"lang":"kotlin","name":"Kotlin"},{"lang":"ts","name":"TypeScript"},{"lang":"vim","name":"VimL"},{"lang":"coco","name":"Coconut"},{"lang":"dart","name":"Dart"}]},"prism":{"lang":{"asm-x64":"nasm"},"ignore":["emojicode","text"],"css":["prismjs/themes/prism-tomorrow.css"]},"wordcount":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"bulk-redirect":{"basepath":"/","redirectsFile":"redirects.json"},"bibtex-cite":{},"mathjax":{"forceSVG":false,"version":"2.6.1"},"include-codeblock":{"check":false,"edit":false,"lang":"","fixlang":true,"template":"default","theme":"chrome","unindent":true},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","lunr":{"maxIndexSize":1000000000},"honkit":">= 3.0.0","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"bibCount":0,"variables":{},"title":"Arcane Algorithm Archive","bib":[{"citationKey":"CT1965","entryType":"ARTICLE","entryTags":{"TITLE":"An algorithm for the machine calculation of complex Fourier series","AUTHOR":"Cooley, James W and Tukey, John W","JOURNAL":"Mathematics of computation","VOLUME":"19","NUMBER":"90","PAGES":"297--301","YEAR":"1965","PUBLISHER":"JSTOR"}},{"citationKey":"JM1973","entryType":"ARTICLE","entryTags":{"TITLE":"On the identification of the convex hull of a finite set of points in the plane","AUTHOR":"Jarvis, Ray A","JOURNAL":"Information processing letters","VOLUME":"2","NUMBER":"1","PAGES":"18--21","YEAR":"1973","PUBLISHER":"Elsevier"}},{"citationKey":"GS1972","entryType":"ARTICLE","entryTags":{"TITLE":"An efficient algorithm for determining the convex hull of a finite planar set","AUTHOR":"Graham, Ronald L","JOURNAL":"Information processing letters","VOLUME":"1","NUMBER":"4","PAGES":"132--133","YEAR":"1972","PUBLISHER":"Elsevier"}},{"citationKey":"GNUPLOT","entryType":"MISC","entryTags":{"TITLE":"Gnuplot 5.0: An Interactive Plotting Program, Official Gnuplot Documentation","AUTHOR":"Williams, T and Kelley, C","YEAR":"2015"}},{"citationKey":"BEDE725","entryType":"BOOK","entryTags":{"TITLE":"Bede, the Reckoning of Time","AUTHOR":"Venerabilis, Beda and others","VOLUME":"29","YEAR":"1999","PUBLISHER":"Liverpool University Press"}},{"citationKey":"DICTCOMPUTUS","entryType":"MISC","entryTags":{"TITLE":"Dictionary.com definition of computus","URL":"https://www.merriam-webster.com/dictionary/computus","YEAR":"2020"}},{"citationKey":"COMPUTUS1876","entryType":"ARTICLE","entryTags":{"TITLE":"To find Easter: a new York correspondent sends us the following","AUTHOR":"unknown","JOURNAL":"Nature","YEAR":"1876"}},{"citationKey":"BIEN2004","entryType":"ARTICLE","entryTags":{"TITLE":"Gauss and beyond: The making of Easter algorithms","AUTHOR":"Bien, Reinhold","JOURNAL":"Archive for history of exact sciences","VOLUME":"58","NUMBER":"5","PAGES":"439--452","YEAR":"2004","PUBLISHER":"Springer"}},{"citationKey":"SERVOIS","entryType":"INPROCEEDINGS","entryTags":{"TITLE":"84 Calendrier","AUTHOR":"Servois, M","BOOKTITLE":"Annales de MathÃ©matiques pures et appliquÃ©es","VOLUME":"4","NUMBER":"1813-1814","PAGES":"84--90"}},{"citationKey":"STANDISH2004","entryType":"ARTICLE","entryTags":{"TITLE":"The astronomical unit now","AUTHOR":"Standish, EM","JOURNAL":"Proceedings of the International Astronomical Union","VOLUME":"2004","NUMBER":"IAUC196","PAGES":"163--179","YEAR":"2004","PUBLISHER":"Cambridge University Press"}},{"citationKey":"LUNAR_MONTH_WIKI","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: Lunar Month","URL":"https://en.wikipedia.org/wiki/Lunar_month","YEAR":"2020"}},{"citationKey":"SELF-SIMILAR","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: Self-similarity","URL":"https://en.wikipedia.org/wiki/Self-similarity","YEAR":"2019"}},{"citationKey":"HAUSDORFF","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: Hausdorff dimension","URL":"https://en.wikipedia.org/wiki/Hausdorff_dimension","YEAR":"2019"}},{"citationKey":"3B1BFRACTAL","entryType":"MISC","entryTags":{"AUTHOR":"Sanderson, G","TITLE":"3blue1brown: Fractals are typically not self-similar","URL":"https://www.youtube.com/watch?v=gB9n2gHsHN4","YEAR":"2017"}},{"citationKey":"MANDELBROT1983FRACTAL","entryType":"BOOK","entryTags":{"TITLE":"The fractal geometry of nature","AUTHOR":"Mandelbrot, Benoit B","VOLUME":"173","YEAR":"1983","PUBLISHER":"WH freeman New York"}},{"citationKey":"MANDELBROT1967LONG","entryType":"ARTICLE","entryTags":{"TITLE":"How long is the coast of Britain? Statistical self-similarity and fractional dimension","AUTHOR":"Mandelbrot, Benoit","JOURNAL":"science","VOLUME":"156","NUMBER":"3775","PAGES":"636--638","YEAR":"1967","PUBLISHER":"American Association for the Advancement of Science"}},{"citationKey":"JAMPOUR2010NEW","entryType":"ARTICLE","entryTags":{"TITLE":"A new fast technique for fingerprint identification with fractal and chaos game theory","AUTHOR":"Jampour, Mahdi and Yaghoobi, Mahdi and Ashourzadeh, Maryam and Soleimani, Adel","JOURNAL":"Fractals","VOLUME":"18","NUMBER":"03","PAGES":"293--300","YEAR":"2010","PUBLISHER":"World Scientific"}},{"citationKey":"FRACTAL-COMPRESSION","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: Fractal Compression","URL":"https://en.wikipedia.org/wiki/Fractal_compression","YEAR":"2019"}},{"citationKey":"SAUPE1994REVIEW","entryType":"ARTICLE","entryTags":{"TITLE":"A review of the fractal image compression literature","AUTHOR":"Saupe, Dietmar and Hamzaoui, Raouf","JOURNAL":"ACM SIGGRAPH Computer Graphics","VOLUME":"28","NUMBER":"4","PAGES":"268--276","YEAR":"1994","PUBLISHER":"ACM"}},{"citationKey":"GNEITING2012ESTIMATORS","entryType":"ARTICLE","entryTags":{"TITLE":"Estimators of fractal dimension: Assessing the roughness of time series and spatial data","AUTHOR":"Gneiting, Tilmann and Å evÄÃ­kovÃ¡, Hana and Percival, Donald B","JOURNAL":"Statistical Science","PAGES":"247--277","YEAR":"2012","PUBLISHER":"JSTOR"}},{"citationKey":"HUTCHINSON1981FRACTALS","entryType":"ARTICLE","entryTags":{"TITLE":"Fractals and self similarity","AUTHOR":"Hutchinson, John E","JOURNAL":"Indiana University Mathematics Journal","VOLUME":"30","NUMBER":"5","PAGES":"713--747","YEAR":"1981","PUBLISHER":"JSTOR"}},{"citationKey":"HUTCHINSON-OPERATOR","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: Hutchinson Operator","URL":"https://en.wikipedia.org/wiki/Hutchinson_operator","YEAR":"2019"}},{"citationKey":"CHAOS-GAME","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: Chaos Game","URL":"https://en.wikipedia.org/wiki/Chaos_game","YEAR":"2019"}},{"citationKey":"CHAOS-GAME-WOLF","entryType":"MISC","entryTags":{"TITLE":"Wolfram: Chaos Game","URL":"http://mathworld.wolfram.com/ChaosGame.html","YEAR":"2019"}},{"citationKey":"BARNSLEY2014FRACTALS","entryType":"BOOK","entryTags":{"TITLE":"Fractals everywhere","AUTHOR":"Barnsley, Michael F","YEAR":"2014","PUBLISHER":"Academic press"}},{"citationKey":"HSV","entryType":"MISC","entryTags":{"TITLE":"Wikipedia: HSL and HSV","URL":"https://en.wikipedia.org/wiki/HSL_and_HSV","YEAR":"2020"}},{"citationKey":"SCHLOSS2019","entryType":"ARTICLE","entryTags":{"TITLE":"Massively parallel split-step Fourier techniques for simulating quantum systems on graphics processing units","AUTHOR":"Schloss, James","YEAR":"2019"}},{"citationKey":"PETHICK2008","entryType":"BOOK","entryTags":{"TITLE":"Bose--Einstein condensation in dilute gases","AUTHOR":"Pethick, Christopher J and Smith, Henrik","YEAR":"2008","PUBLISHER":"Cambridge university press"}},{"citationKey":"WEGERT2012","entryType":"BOOK","entryTags":{"TITLE":"Visual complex functions: an introduction with phase portraits","AUTHOR":"Wegert, Elias","YEAR":"2012","PUBLISHER":"Springer Science \\& Business Media"}},{"citationKey":"POELKEDOMAIN","entryType":"ARTICLE","entryTags":{"TITLE":"Domain Coloring of Complex Functions","AUTHOR":"Poelke, Konstantin and Polthier, Konrad"}},{"citationKey":"LUNDMARK2004","entryType":"ARTICLE","entryTags":{"TITLE":"Visualizing complex analytic functions using domain coloring","AUTHOR":"Lundmark, Hans","JOURNAL":"Recuperado el","VOLUME":"24","YEAR":"2004"}},{"citationKey":"GIMP_BUCKET","entryType":"MISC","entryTags":{"TITLE":"Bucket Fill in Gimp","URL":"https://docs.gimp.org/2.10/en/gimp-tool-bucket-fill.html","YEAR":"2020"}},{"citationKey":"TORBERT2016","entryType":"BOOK","entryTags":{"TITLE":"Applied computer science","AUTHOR":"Torbert, Shane","YEAR":"2016","PAGES":"158","PUBLISHER":"Springer"}},{"citationKey":"CANNY1986COMPUTATIONAL","entryType":"ARTICLE","entryTags":{"TITLE":"A computational approach to edge detection","AUTHOR":"Canny, John","JOURNAL":"IEEE Transactions on pattern analysis and machine intelligence","NUMBER":"6","PAGES":"679--698","YEAR":"1986","PUBLISHER":"Ieee"}},{"citationKey":"MORRIS1978COUNTING","entryType":"ARTICLE","entryTags":{"TITLE":"Counting large numbers of events in small registers","AUTHOR":"Morris, R","JOURNAL":"Communications of the ACM","VOLUME":"21","NUMBER":"10","PAGES":"840--842","YEAR":"1978","PUBLISHER":"ACM New York, NY, USA"}},{"citationKey":"FLAJOLET1985APPROXIMATE","entryType":"ARTICLE","entryTags":{"TITLE":"Approximate counting: a detailed analysis","AUTHOR":"Flajolet, P","JOURNAL":"BIT Numerical Mathematics","VOLUME":"25","NUMBER":"1","PAGES":"113--134","YEAR":"1985","PUBLISHER":"Springer"}},{"citationKey":"ARPIT_COUNTING","entryType":"MISC","entryTags":{"TITLE":"Morris's Algorithm for Approximate Counting","AUTHOR":"Bhayani, A","URL":"https://arpitbhayani.me/blogs/morris-counter","YEAR":"2020"}},{"citationKey":"GREGGUNDERSON_COUNTING","entryType":"MISC","entryTags":{"TITLE":"Approximate Counting with Morris's Algorithm","AUTHOR":"Gundersen, G","URL":"http://gregorygundersen.com/blog/2019/11/11/morris-algorithm/","YEAR":"2019"}},{"citationKey":"3B1B_FINGER_COUNT","entryType":"MISC","entryTags":{"TITLE":"How to count to 1000 on two hands","AUTHOR":"Sanderson, G","URL":"https://youtu.be/1SMmc9gQmHQ","YEAR":"2015"}}],"gitbook":"*"},"file":{"path":"contents/IFS/IFS.md","mtime":"2021-10-16T17:01:51.183Z","type":"markdown"},"gitbook":{"version":"3.6.22","time":"2021-10-16T17:02:24.738Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-api-language-selector/api-language-selector.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

